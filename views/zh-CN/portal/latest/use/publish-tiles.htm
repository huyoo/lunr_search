

<!DOCTYPE html>
<!--[if lt IE 7]>  <html class="ie lt-ie9 lt-ie8 lt-ie7 ie6" dir="ltr"> <![endif]-->
<!--[if IE 7]>     <html class="ie lt-ie9 lt-ie8 ie7" dir="ltr"> <![endif]-->
<!--[if IE 8]>     <html class="ie lt-ie9 ie8" dir="ltr"> <![endif]-->
<!--[if IE 9]>     <html class="ie ie9" dir="ltr"> <![endif]-->
<!--[if !IE]><!--> <html dir="ltr" lang="zh-CN"> <!--<![endif]-->
<head>
    <meta charset="utf-8">
    <title>发布托管切片图层&mdash;Portal for ArcGIS | ArcGIS Enterprise 文档</title>
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">

    <script>
      var docConfig = {
        locale: 'zh-CN'
        ,localedir: 'zh-cn'
        ,langSelector: ''
        
        ,relativeUrl: false
        

        ,searchformUrl: '/search/'
        ,tertiaryNavIndex: ''

        
      };
    </script>
	 


    
    <!--[if lt IE 9]>
      <script src="../../../../zh-CN/cdn/js/libs/html5shiv.js" type="text/javascript"></script>
      <script src="../../../../zh-CN/cdn/js/libs/selectivizr-min.js" type="text/javascript"></script>
      <script src="../../../../zh-CN/cdn/js/libs/json2.js" type="text/javascript"></script>
      <script src="../../../../zh-CN/cdn/js/libs/html5shiv-printshiv.js" type="text/javascript" >

    <![endif]-->

     <!--[if lt IE 11]>
    <script>
      $$(document).ready(function(){
        $$(".hideOnIE").hide();
      });
    </script>
    <![endif]-->
	<meta name="viewport" content="width=device-width, user-scalable=no">
	<link href="../../../../zh-CN/assets/img/favicon.ico" rel="shortcut icon" >
	<link href="../../../../zh-CN/assets/css/screen.css" media="screen" rel="stylesheet" type="text/css" />
	<link href="../../../../zh-CN/cdn/calcite/css/documentation.css" media="screen" rel="stylesheet" type="text/css" />
	<link href="../../../../zh-CN/assets/css/print.css" media="print" type="text/css" rel="stylesheet" />

	<!--
	<link href="../../../../zh-CN/assets/css/screen_l10n.css" media="screen" rel="stylesheet" type="text/css" />
	<link href="../../../../zh-CN/assets/css/documentation/base_l10n.css" media="screen" rel="stylesheet" type="text/css" />
	<link href="../../../../zh-CN/assets/css/print_l10n.css" media="print" type="text/css" rel="stylesheet" />
	-->
	
	
		<script src="../../../../zh-CN/cdn/js/libs/jquery.1.9.1.min.js" type="text/javascript"></script>
	
	<script src="../../../../zh-CN/cdn/js/libs/jquery.cookie.js" type="text/javascript"></script>
	<link href="../../../../zh-CN/cdn/css/colorbox.css" media="screen" rel="stylesheet" type="text/css" />
	<link href="../../../../zh-CN/cdn/css/colorbox_l10n.css" media="screen" rel="stylesheet" type="text/css" />
	<script src="../../../../zh-CN/cdn/js/libs/jquery.colorbox-min.js" type="text/javascript"></script>
	<script src="../../../../zh-CN/assets/js/video-init.js" type="text/javascript"></script>
	<script src="../../../../zh-CN/assets/js/sitecfg.js" type="text/javascript"></script>
	
		<script src="../../../../zh-CN/assets/js/signIn.js" type="text/javascript"></script>
	

	<!--- Language Picker -->
	<script src="../../../../zh-CN/assets/js/locale/l10NStrings.js" type="text/javascript"></script>
	
		 
	

	<script src="../../../../zh-CN/assets/js/calcite-web.js" type="text/javascript"></script>



  <!--- search MD -->
    <META name="description" content="可以通过服务定义文件、ArcMap 文档或 ArcGIS Pro 工程来发布切片图层以便将其托管在您的门户中。"><META name="last-modified" content="2019-12-6"><META name="product" content="arcgis-portal-windows,arcgis-portal-linux,arcgis-enterprise-windows,arcgis-enterprise-linux"><META name="sub_category" content="Portal for ArcGIS"><META name="search-collection" content="help"><META name="content_type_label" content="帮助主题"><META name="sub_category_label" content="Portal for ArcGIS"><META name="search-category" content="help-general"><META name="subject_label" content="PORTAL,服务,SERVER"><META name="version" content="10.8"><META name="content_type" content="Help Topic"><META name="subject" content="PORTAL,SERVICES,SERVER"><META name="content-language" content="zh-cn">
    <!--- search MD -->

  
  <script src="../../../../zh-CN/assets/js/switchers/portal-1.js" type="text/javascript"></script>
  
      

</head>

<!--
      pub: GUID-7B47163B-CE1B-465F-BEEE-4DADDB8DFF09=37
      tpc: GUID-5EAE7795-A997-4E78-AD11-7D2DE4E5234C=29
      -->


<!-- variable declaration, if any -->
<!-- can change following macro to set variable once we are on Jinja 2.8 -->





<body class="claro zh-CN server">
  

  <!-- Drawer location -->
  <div class="drawer drawer-left js-drawer" data-drawer="top-nav">
        <nav class="drawer-nav" role="navigation">
          <aside class="side-nav">
            <h2 class="side-nav-title">Arc<span>GIS</span> Enterprise</h2>
            <form id="helpSearchForm" class="margin-left-half margin-right-half leader-half trailer-half drawer-search-form" method="GET">
              <input type="search" name="q"  placeholder="搜索 ArcGIS Enterprise 帮助">
              <input type="hidden" name="collection" value="help" />
              <input type="hidden" name="product" value="arcgis-portal-windows" />
              <input type="hidden" name="version" value="10.8" />
              <input type="hidden" name="language" value="zh-CN" />
            </form>    
             <a id="nav-portal" data-langlabel="portal" href="../../../../zh-CN/portal/" class="side-nav-link">Portal</a>
             
            <a id="all-servers" data-langlabel="all-servers" href="../../../../zh-CN/server/" class="side-nav-link">所有服务器</a>
            <a id="gis-server" data-langlabel="gis-server" href="../../../../zh-CN/server/" class="side-nav-link">GIS Server</a>
            <a id="image-server" data-langlabel="image-server" href="../../../../zh-CN/image/" class="side-nav-link">Image Server</a>
            <a id="geo-analytics-server" data-langlabel="geo-analytics-server" href="../../../../zh-CN/geoanalytics/" class="side-nav-link">GeoAnalytics Server</a>
            <a id="geoevent-server" data-langlabel="geoevent-server" href="../../../../zh-CN/geoevent/" class="side-nav-link">GeoEvent Server</a>
            <a id="notebook-server" data-langlabel="notebook-server" href="../../../../zh-CN/notebook/" class="side-nav-link">Notebook Server</a>
            <a id="nav-data-store" data-langlabel="data-store" href="../../../../zh-CN/data-store/" class="side-nav-link">Data Stores</a>
            <a id="nav-cloud" data-langlabel="cloud" href="../../../../zh-CN/cloud/" class="side-nav-link">云</a>
            <a id="nav-apps" data-langlabel="apps" href="../../../../zh-CN/apps/" class="side-nav-link">应用程序</a>
            <a id="nav-doc" data-langlabel="documentation" href="../../../../zh-CN/documentation/" class="side-nav-link">文档</a>

          </aside>
        </nav>
    </div>

    <!-- user navigation collapses to drawer on mobile -->
    
    <div class="drawer drawer-right js-drawer hide-if-logged-out logged-in-navigation" data-drawer="user-nav">
      <nav class="drawer-nav">
        <aside class="side-nav">
          <a class="side-nav-link agolProfile" href="#">我的个人资料</a>
          <a class="side-nav-link icon-ui-sign-out js-log-out" href="#">登出</a>
        </aside>
      </nav>
    </div>
    
<!-- End of drawer -->

  
  <div class="wrapper">
      <!--googleoff: all-->

      <header class="top-nav" data-skin="learn">
        <a class="skip-to-content" href="#skip-to-content">Skip To Content</a>
        <div class="grid-container">
          <div class="column-24">


            <!--<div class="top-nav-title-wrapper text-center ">-->
              <a href='../../../../zh-CN/' class="top-nav-title tablet-hide"><span>Arc</span>GIS  Enterprise</a>
              <a href='../../../../zh-CN/' class="icon-ui-menu top-nav-title js-drawer-toggle tablet-show" data-drawer="top-nav"><span>Arc</span>GIS Enterprise</a>
            <!--</div> -->

          
            <nav role="navigation" class="top-nav-list left tablet-hide">
              <a id="nav-portal" data-langlabel="portal" href="../../../../zh-CN/portal/" class="top-nav-link">Portal</a>

                <div class="dropdown js-dropdown ">
                  <a class="top-nav-link js-dropdown-toggle" tabindex="0" aria-haspopup="true" aria-expanded="false" href="#">Servers</a>
                  <nav class="dropdown-menu featured" role="menu">
                    <ul class="dropdown-sublist-featured">
                      <li class="dropdown-subitem-featured">
                        <a href="../../../../zh-CN/get-started/latest/windows/additional-server-deployment.htm" class="sublink-featured">
                          <span><svg class="sublink-image" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><path  d="M42.92 6.1H4.12v8.566l.833.832-.835.833-.018 7.332.845.847-.825.824V33.9h25v5.2h-2v1.075H8.02v.8h19.1v.925h4.8v-.925H40v-.8h-8.08V39.1h-2v-5.2h13v-8.566l-.834-.834.835-.834v-7.332l-.835-.834.835-.834zm-11.8 35h-3.2v-1.2h3.2zm11-8H4.92v-7.434l.767-.766h35.668l.765.766zm0-9.766l-.766.766H5.666l-.766-.767.017-6.669.766-.764h35.671l.766.766zm0-9l-.766.766H5.687l-.766-.766V6.9h37.2zM19 11.9h-2v-.8h2zm-4 0h-2v-.8h2zm-4 0H9v-.8h2zm6 8.2h2v.8h-2zm-4 0h2v.8h-2zm-4 0h2v.8H9zm8 9h2v.8h-2zm-4 0h2v.8h-2zm-4 0h2v.8H9z"/></svg></span>
                          <span class="sublink-text">所有服务器</span>
                        </a>
                      </li>
                      <li class="dropdown-subitem-featured">
                        <a href="../../../../zh-CN/server/" class="sublink-featured">
                          <span><svg class="sublink-image" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><path d="M45.98 33.575a.616.616 0 0 0-.335-.51l-3.362-2.03 3.362-2.031a.556.556 0 0 0 0-1.02l-11.1-6.704a1.293 1.293 0 0 0-1.112 0L22.33 27.982a.556.556 0 0 0 0 1.02l3.36 2.03-3.358 2.03a.556.556 0 0 0-.002 1.021l3.322 2.006-3.324 2.008a.555.555 0 0 0 .002 1.017l11.102 6.703a1.25 1.25 0 0 0 1.11.002l11.104-6.706a.556.556 0 0 0 0-1.02l-3.32-2.006 3.318-2.004a.607.607 0 0 0 .335-.509zM33.837 21.97c.026-.01.286-.005.29-.005l10.814 6.53-10.8 6.523c-.028.01-.284.005-.294.006l-10.813-6.53zm11.105 16.636l-10.8 6.523a2.564 2.564 0 0 1-.295.006l-10.81-6.529 3.39-2.047 7.004 4.23a1.083 1.083 0 0 0 .557.131 1.101 1.101 0 0 0 .554-.13l7.01-4.233zM34.14 40.098a2.545 2.545 0 0 1-.294.006l-10.812-6.53 3.43-2.073 6.97 4.208a1.25 1.25 0 0 0 1.107-.001l6.966-4.206 3.431 2.073zM9 8H7V7h2zm8 8h-2v-1h2zm-4-8h-2V7h2zm4 0h-2V7h2zm-4 8h-2v-1h2zm7.316 11.1H3.9v-6.434l.766-.766h35.668l.766.766v2.12l.8.483v-2.935l-.826-.826.826-.845v-6.329l-.834-.834.834-.834V3.1H3.1v7.566l.834.834-.834.834v6.332l.834.834-.834.834V27.9h16.88a2.632 2.632 0 0 1 .336-.8zM3.9 10.334V3.9h37.2v6.434l-.766.766H4.666zm0 8v-5.668l.766-.766h35.668l.766.766v5.67l-.746.764H4.666zM15 24v-1h2v1zm-4 0v-1h2v1zm-2-8H7v-1h2zm-2 8v-1h2v1z"/></svg></span>
                          <span class="sublink-text">GIS Server</span>
                        </a>
                      </li>
                      <li class="dropdown-subitem-featured">
                        <a href="../../../../zh-CN/image/" class="sublink-featured">
                          <span><svg class="sublink-image" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><path d="M17 8h-2V7h2zm-4-1h-2v1h2zm0 8h-2v1h2zM9 7H7v1h2zm8 8h-2v1h2zm-8 0H7v1h2zm4 9v-1h-2v1zm-4 0v-1H7v1zm8 0v-1h-2v1zm4 3.9H3.1v-7.566l.834-.834-.834-.834v-6.332l.834-.834-.834-.834V3.1h38.8v7.566l-.834.834.834.834v6.33l-.826.844.826.826V21h-.8v-.334l-.766-.766H4.666l-.766.766V27.1H21zM4.666 11.1h35.668l.766-.766V3.9H3.9v6.434zm0 8h35.688l.746-.763v-5.671l-.766-.766H4.666l-.766.766v5.668zm40.234 4v21.8H23.1V23.1zm-.8 16.366L39.466 44.1h2.868l1.766-1.766zm-20.2-9.932l5.634-5.634h-2.868L23.9 26.666zm6.2-5.068L24.466 30.1h2.868l2.766-2.766zM28.466 30.1H30.1v-1.634zm2.434 0h6.2v-6.2h-6.2zm-7 7h6.2v-6.2h-6.2zm7 0h6.2v-6.2h-6.2zm0 6.434l5.634-5.634h-2.868L30.9 40.666zm7-7l5.634-5.634h-2.868L37.9 33.666zm1.634-5.634H37.9v1.634zm-8.634 7v1.634l1.634-1.634zm.566 6.2h2.868l2.766-2.766v-2.868zm6.434-3.566l2.634-2.634H37.9zM35.466 44.1H37.1v-1.634zm2.434 0h.434l5.766-5.766V37.9h-2.434L37.9 41.666zm6.2-8.634L42.466 37.1H44.1zm0-4L38.466 37.1h2.868l2.766-2.766zm0-7.566h-6.2v6.2h6.2zm-20.2 0v1.634l1.634-1.634zm0 20.2h6.2v-6.2h-6.2zm20.2 0v-.634l-.634.634z"/></svg></span>
                          <span class="sublink-text">Image Server</span>
                        </a>
                      </li>
                      <li class="dropdown-subitem-featured">
                        <a href="../../../../zh-CN/geoanalytics/" class="sublink-featured">
                          <span><svg class="sublink-image" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><path d="M17 16h-2v-1h2zm-8 8v-1H7v1zm8 0v-1h-2v1zM13 7h-2v1h2zm4 0h-2v1h2zM9 7H7v1h2zm21.45 20.9H3.1v-7.566l.834-.834-.834-.834v-6.332l.834-.834-.834-.834V3.1h38.8v7.566l-.834.834.834.834v6.33l-.826.844.826.826V27.9h-1.464l-.801-.8H41.1v-6.434l-.766-.766H4.666l-.766.766V27.1h27.15zM4.666 11.1h35.668l.766-.766V3.9H3.9v6.434zm0 8h35.688l.746-.763v-5.671l-.766-.766H4.666l-.766.766v5.668zM13 24v-1h-2v1zm0-9h-2v1h2zm-4 0H7v1h2zm26.672 27.148A1.87 1.87 0 0 1 35.9 43a1.91 1.91 0 1 1-3.763-.222l-9.845-3.414A1.88 1.88 0 0 1 21 39.9a1.9 1.9 0 1 1 1.474-3.084l4.692-2.346A1.878 1.878 0 0 1 27.1 34a1.902 1.902 0 0 1 1.9-1.9 1.867 1.867 0 0 1 .781.191l3.788-5.05A1.88 1.88 0 0 1 33.1 26a1.9 1.9 0 1 1 3.491 1.026l4.889 4.888c-.069.056-.144.1-.21.162a3.986 3.986 0 0 0-.358.402l-4.883-4.883A1.889 1.889 0 0 1 35 27.9a1.867 1.867 0 0 1-.781-.191l-3.788 5.049a1.868 1.868 0 0 1 .437.965l9.204.614c-.018.11-.049.218-.058.33A3.93 3.93 0 0 0 40 35c0 .046.01.09.01.135l-9.185-.612A1.913 1.913 0 0 1 29 35.9a1.889 1.889 0 0 1-1.474-.716l-4.692 2.346a1.878 1.878 0 0 1 .066.47 1.9 1.9 0 0 1-.105.625c-.007.02-.022.036-.03.056l9.63 3.34a1.87 1.87 0 0 1 2.786-.505l5.415-4.437c.067.108.127.22.204.322a3.9 3.9 0 0 0 .292.306zM33.9 26a1.092 1.092 0 0 0 .43.872 1.12 1.12 0 0 0 1.42-.068A1.1 1.1 0 1 0 33.9 26zm-6 8a1.1 1.1 0 0 0 2.196.093 1.135 1.135 0 0 0-.426-.965A1.087 1.087 0 0 0 29 32.9a1.101 1.101 0 0 0-1.1 1.1zm-5.8 4a1.098 1.098 0 1 0-.06.362A1.101 1.101 0 0 0 22.1 38zm13 5a1.1 1.1 0 1 0-2.2 0 1.1 1.1 0 0 0 2.2 0zm10.8-8a1.9 1.9 0 1 1-3.8 0c0-.053.003-.105.007-.158A1.9 1.9 0 0 1 45.9 35zm-.8 0a1.1 1.1 0 0 0-2.196-.093 1.153 1.153 0 0 0 .216.752A1.1 1.1 0 0 0 45.1 35z"/></svg></span>
                          <span class="sublink-text">GeoAnalytics Server</span>
                        </a>
                      </li>
                      <li class="dropdown-subitem-featured">
                        <a href="../../../../zh-CN/geoevent/" class="sublink-featured">
                          <span><svg class="sublink-image" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><path d="M13 8h-2V7h2zm4-1h-2v1h2zm0 8h-2v1h2zM9 7H7v1h2zm12.418 20.9H3.1v-7.566l.834-.834-.834-.834v-6.332l.834-.834-.834-.834V3.1h38.8v7.566l-.834.834.834.834v6.33l-.826.844.826.826v2.117c-.259-.177-.53-.337-.8-.497v-1.288l-.766-.766H4.666l-.766.766V27.1h17.933c-.148.26-.283.53-.415.8zM4.666 11.1h35.668l.766-.766V3.9H3.9v6.434zm0 8h35.688l.746-.763v-5.671l-.766-.766H4.666l-.766.766v5.668zM9 24v-1H7v1zm4-9h-2v1h2zm0 9v-1h-2v1zm-4-9H7v1h2zm8 9v-1h-2v1zm16.9 2h-.8v8.9H39v-.8h-5.1zm.1-3.901a11.9 11.9 0 1 0 11.9 11.9 11.914 11.914 0 0 0-11.9-11.9zm0 23a11.1 11.1 0 1 1 11.1-11.1 11.112 11.112 0 0 1-11.1 11.1z"/></svg></span>
                          <span class="sublink-text">GeoEvent Server</span>
                        </a>
                      </li>
                      <li class="dropdown-subitem-featured">
                        <a href="../../../../zh-CN/notebook/" class="sublink-featured">
                          <span><svg class="sublink-image" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><path d="M22 27.1H3.9v-6.434l.766-.766h18.576a5.262 5.262 0 0 1 .83-.8H4.666l-.766-.766v-5.668l.766-.766h35.668l.766.766V18h.8v-5.666l-.834-.834.834-.834V3.1H3.1v7.566l.834.834-.834.834v6.332l.834.834-.834.834V27.9H22zM3.9 10.334V3.9h37.2v6.434l-.766.766H4.666zM9 8H7V7h2zm8 0h-2V7h2zm-4 0h-2V7h2zm2 16v-1h2v1zm-4 0v-1h2v1zm-4 0v-1h2v1zm0-8v-1h2v1zm8 0v-1h2v1zm-4 0v-1h2v1zm18.9 8.1h-1.8v1.8h1.8zm-.8 1h-.2v-.2h.2zm15.498-4.48a2.727 2.727 0 0 0-1.62-.5v-.02H27.25a3.154 3.154 0 0 0-3.15 3.15V38.1h-1.68a3.386 3.386 0 0 0-2.872 1.58 3.49 3.49 0 0 0-.157 3.419 3.241 3.241 0 0 0 2.954 1.801h15.161a3.404 3.404 0 0 0 3.394-3.4V26.9h5v-3.65a3.224 3.224 0 0 0-1.302-2.63zM22.345 44.1a2.44 2.44 0 0 1-2.23-1.341 2.706 2.706 0 0 1 .11-2.65A2.588 2.588 0 0 1 22.42 38.9h12.89a3.395 3.395 0 0 0 0 5.2zM40.1 23.192V41.5a2.6 2.6 0 1 1-2.6-2.6v-.8H24.9V23.25a2.352 2.352 0 0 1 2.35-2.35h13.795a3.183 3.183 0 0 0-.945 2.292zm5 2.908h-4.2v-2.908a2.274 2.274 0 0 1 1.44-2.18 1.944 1.944 0 0 1 1.791.259 2.423 2.423 0 0 1 .97 1.979zm-17.1 5h9v.8h-9zm0 3h7v.8h-7zm0-6h9v.8h-9zm4-3h5v.8h-5z"/></svg></span>
                          <span class="sublink-text">Notebook Server</span>
                        </a>
                      </li>
                    </ul>
                  </nav>
                </div>

              <a id="nav-data-store" data-langlabel="data-store" href="../../../../zh-CN/data-store/" class="top-nav-link">Data Stores</a>
              <a id="nav-cloud" data-langlabel="cloud" href="../../../../zh-CN/cloud/" class="top-nav-link">云</a>
              <a id="nav-apps" data-langlabel="apps" href="../../../../zh-CN/apps/" class="top-nav-link">应用程序</a>
            </nav>


            
            
            

            <div class="margin-left-1 top-nav-list right hide-if-logged-in logged-out-navigation">
               
  <button class="search-top-nav link-dark-gray js-search-toggle" href="#" aria-label="Search">
    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" class="svg-icon js-search-icon">
      <path d="M31.607 27.838l-6.133-6.137a1.336 1.336 0 0 0-1.887 0l-.035.035-2.533-2.533-.014.014c3.652-4.556 3.422-11.195-.803-15.42-4.529-4.527-11.875-4.531-16.404 0-4.531 4.531-4.529 11.875 0 16.406 4.205 4.204 10.811 4.455 15.365.848l.004.003-.033.033 2.541 2.54a1.33 1.33 0 0 0 .025 1.848l6.135 6.133a1.33 1.33 0 0 0 1.887 0l1.885-1.883a1.332 1.332 0 0 0 0-1.887zM17.811 17.809a8.213 8.213 0 0 1-11.619 0 8.217 8.217 0 0 1 0-11.622 8.219 8.219 0 0 1 11.619.004 8.216 8.216 0 0 1 0 11.618z"/>
    </svg>
    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" class="svg-icon js-close-icon hide">
      <path d="M18.404 16l9.9 9.9-2.404 2.404-9.9-9.9-9.9 9.9L3.696 25.9l9.9-9.9-9.9-9.898L6.1 3.698l9.9 9.899 9.9-9.9 2.404 2.406-9.9 9.898z"/>
    </svg>
  </button>

              
              <a data-langlabel="sign-in" id="login-link" class="icon-ui-user top-nav-link link-blue login-link" href="#">登录</a>
              
            </div>

            
            <nav class="margin-left-1 top-nav-list right hide-if-logged-out logged-in-navigation">
              
  <button class="search-top-nav link-dark-gray js-search-toggle" href="#" aria-label="Search">
    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" class="svg-icon js-search-icon">
      <path d="M31.607 27.838l-6.133-6.137a1.336 1.336 0 0 0-1.887 0l-.035.035-2.533-2.533-.014.014c3.652-4.556 3.422-11.195-.803-15.42-4.529-4.527-11.875-4.531-16.404 0-4.531 4.531-4.529 11.875 0 16.406 4.205 4.204 10.811 4.455 15.365.848l.004.003-.033.033 2.541 2.54a1.33 1.33 0 0 0 .025 1.848l6.135 6.133a1.33 1.33 0 0 0 1.887 0l1.885-1.883a1.332 1.332 0 0 0 0-1.887zM17.811 17.809a8.213 8.213 0 0 1-11.619 0 8.217 8.217 0 0 1 0-11.622 8.219 8.219 0 0 1 11.619.004 8.216 8.216 0 0 1 0 11.618z"/>
    </svg>
    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" class="svg-icon js-close-icon hide">
      <path d="M18.404 16l9.9 9.9-2.404 2.404-9.9-9.9-9.9 9.9L3.696 25.9l9.9-9.9-9.9-9.898L6.1 3.698l9.9 9.899 9.9-9.9 2.404 2.406-9.9 9.898z"/>
    </svg>
  </button>

             
              <div class="dropdown js-dropdown right">

                <div class="tablet-show top-nav-link">
                  <img alt="User Avatar" class="user-nav-image js-drawer-toggle" data-drawer="user-nav" data-user-avatar>
                  <a href="#" data-drawer="user-nav" class="user-nav-name js-drawer-toggle" data-first-name></a>
                </div>

                <div class="tablet-hide top-nav-link js-dropdown-toggle">
                  <img alt="User Avatar" class="user-nav-image js-drawer-toggle" data-drawer="user-nav" data-user-avatar>
                  <a class="user-nav-name top-nav-dropdown dropdown-btn" data-first-name>&nbsp;</a>
                </div>

                <nav class="dropdown-menu dropdown-right">
                
                  <a class="dropdown-link agolProfile" id="agolProfile" href="#">我的个人资料</a>
                  <a class="dropdown-link js-log-out" id="agolLogout" href="#">登出</a>
                </nav>
              </div>
            </nav>
            

            
          </div>
        </div>
      </header>

      <div class="js-search search-overlay">
        <div class="search-content" role="dialog" aria-labelledby="search">
          <form method="GET" id="helpSearchForm">
            <label>
              搜索 ArcGIS Enterprise 帮助
              <div class="search-bar">
                <input type="search" name="q"  placeholder="搜索 ArcGIS Enterprise 帮助" class="search-input js-search-input">
                <input type="hidden" name="collection" value="help" />
                <input type="hidden" name="product" value="arcgis-portal-windows" />
                <input type="hidden" name="version" value="10.8" />
                <input type="hidden" name="language" value="zh-CN" />
              </div>
            </label>
            <input type="hidden" name="relativePath" value="../../../../" /><button type="submit" class="btn btn-large right">搜索</button>
          </form>
        </div>
      </div>

      <!--googleon: all-->

      <div id="skip-to-content">
        <!--googleoff: all-->
        <header class="sub-nav sub-nav-learn">
          <div class="grid-container">
            
            <div class="column-24">
              <div style="display:table;" class="sdk-home-banner">
                <div class="sdk-home-banner-content">
                  <h1 class="sub-nav-title link-white">Portal for ArcGIS</h1>
                </div>
              </div>
            </div>

            <div class="column-24">
              <nav class='sub-nav-list tablet-hide'><a class="sub-nav-link" href="../../../../zh-CN/portal/" target="_top" title="Portal for ArcGIS 主页">主页</a><a class="sub-nav-link is-active" href="../../../../zh-CN/portal/latest/use/" target="_top" title="使用 Portal for ArcGIS">使用</a><a class="sub-nav-link" href="../../../../zh-CN/portal/latest/administer/windows/" target="_top" title="安装、管理和保护 Portal for ArcGIS">管理</a></nav><select class='tablet-show select-full trailer-half js-select-nav'><option value="../../../../zh-CN/portal/">主页</option><option selected="true" value="../../../../zh-CN/portal/latest/use/">使用</option><option value="../../../../zh-CN/portal/latest/administer/windows/">管理</option></select>
            </div>

          </div>
        </header>
        <!--googleon: all-->
       
        <!-- content goes here -->
        <div class="grid-container ">
          

            
              
  <!--BREADCRUMB-BEG--><div id="bigmac" class="sticky-breadcrumbs trailer-2" data-spy="affix" data-offset-top="180"> </div><!--BREADCRUMB-END-->
  <!--googleoff: all-->
    <div class="column-5 tablet-column-12 trailer-2 ">
      <aside class="js-accordion accordion reference-index" aria-live="polite" role="tablist">
        <div></div>
      </aside>

      <div class="js-sticky scroll-show tablet-hide leader-1 back-to-top" data-top="0" style="top: 0px;">
        <a href="#" class="btn btn-fill btn-clear">返回顶部</a>
      </div>
    </div>
  <!--googleon: all-->
  
            
            
            
	
		<div class="column-13  pre-1 content-section">
	
		<header class="trailer-1"><h1>发布托管切片图层</h1></header>

		 
	<!--googleoff: all-->
	
		
				<aside id="main-toc-small" class="js-accordion accordion tablet-show trailer-1">
			      <div class="accordion-section">
			        <h4 class="accordion-title">在本主题中</h4>
			        <div class="accordion-content list-plain">
			          <ol class="list-plain pre-0 trailer-0"><li><a href="#ESRI_SECTION1_F68FCBD33BD54117B23232D41A762E89">从托管要素图层发布</a></li><li><a href="#ESRI_SECTION1_8E904AC4E5994E0EA75384062A8D6BF5">在 <ph translate="no" varid="arcgis_professional_xi">ArcGIS Pro</ph> 中定义并发布地图</a></li><li><a href="#ESRI_SECTION1_9DDC0AFDD2AD4AF59CD36A29721AB67A">在 <ph translate="no" varid="arcgis_professional_xi">ArcGIS Pro</ph> 中构建切片包，然后将其上传到您的组织</a></li><li><a href="#ESRI_SECTION1_A2E4F9EB87454D84B66788D7D4C027EC">在 <ph varid="ArcMap_app">ArcMap</ph> 中定义并发布地图</a></li><li><a href="#GUID-C467C9D7-443D-48D6-90AB-8204E3B9FD83">在 <ph varid="ArcMap_app">ArcMap</ph> 中构建并共享切片包，然后发布</a></li><li><a href="#ESRI_SECTION1_08DDA29C1F264B398BB618CFFB550A08">从服务定义文件发布</a></li></ol>
			        </div>
			      </div>
			     </aside>
		
    
   <!--googleon: all-->


		<main>
			
	
    	
    


			
<p id="GUID-936EAA24-FCDA-4678-BD5A-61BDE507792F"><span class="ph">发布到并托管于您的门户的切片图层支持使用一组预先绘制的地图图像或切片实现大型数据集的快速可视化。</span> 托管切片为业务图层提供了可参考的地理环境。例如，可包含一个您所在社区的街道的切片以便为要素图层中的街道符号提供图形参考。</p><p id="GUID-B06C81A4-B08B-433E-8904-9492B9463850"><span class="ph">您可使用以下任意一种方法发布将在您的门户上托管的切片图层：</span></p><p id="GUID-2CF6FD7A-781D-4372-BF70-CDD2A7092391" ishcondition="agol_plat=portal"><ul purpose="ul" id="UL_B8F0BB0FC021458AA694B6314E633147"><li purpose="li" id="LI_9722859145CA4B3381EE4B0CBDAFBCC7"><a class="xref xref" href="../../../../zh-CN/portal/latest/use/publish-tiles.htm#ESRI_SECTION1_F68FCBD33BD54117B23232D41A762E89">从现有托管要素图层创建切片。</a></li><li purpose="li" id="LI_FF2E7B78C62749F5A783CF808FA43C2D"><a class="xref xref" href="../../../../zh-CN/portal/latest/use/publish-tiles.htm#ESRI_SECTION1_8E904AC4E5994E0EA75384062A8D6BF5">在 <span class="ph">ArcGIS Pro</span> 中定义地图，并允许您的门户创建切片。</a></li><li purpose="li" id="LI_5F818A7E542B4BC3A9E326C023387EB9"><a class="xref xref" href="../../../../zh-CN/portal/latest/use/publish-tiles.htm#ESRI_SECTION1_9DDC0AFDD2AD4AF59CD36A29721AB67A">在 <span class="ph">ArcGIS Pro</span> 中构建切片包，然后上传并发布到您的门户。</a></li><li purpose="li" id="LI_C71198C7FB2B40409351A2760DE9601C"><a class="xref xref" href="../../../../zh-CN/portal/latest/use/publish-tiles.htm#ESRI_SECTION1_A2E4F9EB87454D84B66788D7D4C027EC">在 <span class="ph">ArcMap</span> 中定义地图，并将其作为切片图层发布至门户</a>。</li><li purpose="li" id="LI_B44C41F830374112BE08C4750A3F27AF"> <a class="xref xref" href="../../../../zh-CN/portal/latest/use/publish-tiles.htm#GUID-C467C9D7-443D-48D6-90AB-8204E3B9FD83">在 <span class="ph">ArcMap</span> 中构建并共享切片包，然后在您的门户中发布</a>。</li><li purpose="li" id="LI_15E64F2C251A4BF281047FE215986784"><a class="xref xref" href="../../../../zh-CN/portal/latest/use/publish-tiles.htm#ESRI_SECTION1_08DDA29C1F264B398BB618CFFB550A08">在 <span class="ph">ArcMap</span> 中定义服务定义文件，将其上传，并允许您的门户创建切片。</a></li></ul></p><p id="GUID-88AA2EFC-03AD-4916-9283-819CC661E564" ishcondition="agol_plat=portal">可以在发布时在切片上自动构建缓存，或在发布后手动构建缓存。有关详细信息，请参阅<a class="xref xref" href="../../../../zh-CN/portal/latest/use/optimize-maps.htm#ESRI_SECTION1_9ED56EF6CB644689B5E8A6A922D2E15A">切片缓存的最佳做法</a>。</p><p id="GUID-5154EC7C-F4D9-4161-ADD1-0ED301442766"><span class="ph">要发布托管切片图层，您必须是门户中以下内容之一的成员：</span> <ul purpose="ul" id="UL_AFD956D38C8F4BB9BAFEA630C7E76A1E"><li purpose="li" id="LI_3F8C76B9BFC54D33A945015248D82699"><a class="xref xref" href="../../../../zh-CN/portal/latest/use/roles.htm#GUID-CB99B3B3-D4E7-4857-82AD-744BCF3484A8">默认发布者角色</a></li><li purpose="li" id="LI_3EA8B7236554428F80CEDB60A5B2DED6">具有创建内容和发布托管切片图层的<a class="xref xref" href="../../../../zh-CN/portal/latest/use/roles.htm">权限</a>的自定义角色</li></ul></p><section class="section1 padded-anchor" id="ESRI_SECTION1_F68FCBD33BD54117B23232D41A762E89" purpose="section1"><h2>从托管要素图层发布</h2><p id="GUID-AAAF72E8-7C8B-4A57-8AE1-72D380A9849E">您可以使用所拥有的现存托管要素图层向您的门户发布托管切片图层。在可视化大型数据集方面此工作流非常有用，因为相比于动态渲染要素，缓存切片绘制得更快。</p><div class="panel trailer-1 note" id="GUID-49D19E5E-C6E7-45F0-A36D-EB46721F6ED8"><h5 class="icon-ui-comment trailer-0">注：</h5><p id="GUID-30402A81-583C-4064-8034-ADD31EA6F47B"><ul purpose="ul" id="UL_2CA344C224C448C8B151EEBE8CF07876"><li purpose="li" id="LI_BDC34429390443DC824AAC3D2CCFA83D">对托管要素图层所做的空间属性编辑不会自动反映在托管切片图层中。必须从更新后的托管要素图层中重新发布托管切片图层。</li><li purpose="li" id="LI_F6D0DBE471F54406A041EF072A461C72">托管要素图层上存在可能阻止您发布托管切片图层的<a class="xref xref" href="../../../../zh-CN/portal/latest/use/styling-reference.htm#ESRI_SECTION1_B5BE7F1863FF449C9445E85C9C617A33">样式化限制</a>。</li><li purpose="li" id="LI_9DA37A76AB1D46EEB9959D462DBE9A69">您不能通过多面体或点云托管要素图层发布托管切片图层。</li></ul></p></div><section class="wfsteps padded-anchor" purpose="wfsteps"><h4></h4><section class="context padded-anchor" id="ESRI_CONTEXT_4A4243661ECC4C91850B44E45FBA5023" purpose="context"><p id="GUID-05D92F1E-7A5F-47D0-81FC-FC8B3250D520">要从托管要素图层发布托管切片图层，请按照以下步骤操作：</p></section><div class="steps" id="ESRI_STEPS_20CA00D86D8245A980082E755E7FC111"><ol class="list-numbered" purpose="ol"><li purpose="step" id="ESRI_STEP_1B362727698344A092252A4215B6DBA2"><span purpose="cmd" id="GUID-E4B6C6E6-2BC8-4730-9391-2AA656E255A7">登录您的门户并单击<span class="uicontrol">内容 <span class="greaterthan">&gt;</span> 我的内容</span>。</span></li><li purpose="step" id="ESRI_STEP_0680D383FE7A40FEAC84C3C7AF92C111"><span purpose="cmd" id="GUID-09264CCF-A4B4-40B0-92B0-D6C168B43126">要进行发布，请执行下列步骤之一：</span><ul purpose="choices" id="ESRI_CHOICES_2ABB7F1268F34CA0BDE0742472D25B38"><li purpose="choice" id="ESRI_CHOICE_6386753D1ABB4C0D8C5EA22635671046">单击想要发布的托管要素图层并单击<span class="uicontrol">发布</span>。</li><li purpose="choice" id="ESRI_CHOICE_1C65C1FE643A422097F197B26C339D39">单击<span class="uicontrol">创建 <span class="greaterthan">&gt;</span> 切片图层</span>，并选择作为切片发布的<span class="uicontrol">要素图层</span>。</li></ul></li><li purpose="step" id="ESRI_STEP_EB2ABBC7642347CD8A71D6CB9413EC09"><span purpose="cmd" id="GUID-AEA09CC4-DC68-4FBB-A3F4-6E5F53F2D520">输入托管切片图层的标题、标签和摘要。</span></li><li purpose="step" id="ESRI_STEP_7E2CB95391374F3D8DEE2651E49F936E"><span purpose="cmd">如果门户管理员已配置内容类别，请单击<span class="uicontrol">分配类别</span>，然后最多选择 20 个类别以方便其他用户查找您的项目。您也可以使用<span class="uicontrol">过滤器类别</span>框来缩小类别列表范围。</span></li><li purpose="step" id="ESRI_STEP_96D5BECB7D5D44108BD4B845BF7D6C3C"><span purpose="cmd" id="GUID-A85DD47F-3661-4340-B6C1-65C93AB4F354">选择要存储托管切片图层的文件夹。</span></li><li purpose="step" id="ESRI_STEP_72E8DA5C789C4FF28F375ECC11E66594"><span purpose="cmd" id="GUID-B3FF5F77-9AE8-4F03-B2F2-CF5044F674DA">或者，通过拖动<span class="uicontrol">可视范围</span>端点更改图层的显示范围。</span><div class="info" purpose="info"><div class="panel trailer-1" id="GUID-49BB4BAC-AC72-4840-A3B7-CAE64EE089D5"><h5 class="icon-ui-notice-triangle trailer-0">警告：</h5><p id="GUID-DACF9030-33CA-49DF-A5DD-BEBA00F9C460">门户网页会显示建议的比例范围，但您可以对其进行修改。但请注意，如在比例范围中包含大比例，则会使门户的托管服务器消耗的资源大幅增加。请不要创建超出数据精度的切片。</p></div></div></li><li purpose="step" id="ESRI_STEP_E3CC9AA70E15426282D2A37E4E1F7697"><span purpose="cmd" id="GUID-25C828A6-001A-4561-BDCC-166C87A65A8E">单击<span class="uicontrol">确定</span>。</span><div class="stepresult" purpose="stepresult"><p id="GUID-D550A4A0-BC49-4217-9DFA-2EA5F4B74D3A">将创建托管切片图层，并显示其项目页面。</p></div></li></ol></div></section></section><section class="section1 padded-anchor" id="ESRI_SECTION1_8E904AC4E5994E0EA75384062A8D6BF5" purpose="section1"><h2>在 <span class="ph">ArcGIS Pro</span> 中定义并发布地图</h2><p id="GUID-1FF20CC9-253D-4878-A4DC-7304915010AB">通过 <span class="ph">ArcGIS Pro</span> 中的地图，您可以发布要在门户中托管的切片图层。</p><div class="panel trailer-1 note" id="GUID-6ECFDB4D-848C-40F1-845D-AAF0B2B5F786"><h5 class="icon-ui-comment trailer-0">注：</h5><p id="GUID-AE9A71D0-AD8F-4BFA-8782-EA08BC14CE92">如果已对 <span class="ph">ArcGIS Pro</span> 中的图层应用了定义查询，则 ArcGIS 将把定义查询应用到已发布的托管切片图层。但是，所有数据都会复制到 <span class="ph">ArcGIS Enterprise</span> 门户。如果希望发布数据的子集，则必须将子集导出到其他要素类中，然后将其发布。</p></div><p id="GUID-699F8A47-9E39-4AFE-BE9E-1477B46B35C4">请注意，Web 浏览器无法显示您在制作地图时最初可能使用的某些较为复杂的制图符号。大多数符号类型均可用，但在某些情况下，符号会在发布时降级。有关受支持符号的详细信息，请参阅 <span class="ph">ArcGIS Server</span> 帮助中的<a class="xref xref" esrisubtype="extrel" hrefpfx="/zh-cn/server/latest/publish-services" href="../../../../zh-CN/server/latest/publish-services/windows/author-feature-services.htm">创作地图以发布要素服务</a>，并在发布前对地图符号进行所需更改。</p><section class="wfsteps padded-anchor" purpose="wfsteps"><h4></h4><div class="steps" id="ESRI_STEPS_E73148CB465140448400B0BBFE177C44"><ol class="list-numbered" purpose="ol"><li purpose="step" id="ESRI_STEP_30B1DD51D8F4468FB3EE147170685710"><span purpose="cmd" id="GUID-DF45544B-33ED-4C5D-8648-C3DE8852ABD2">开启 <span class="ph">ArcGIS Pro</span> 并打开包含要发布的地图的工程。</span></li><li purpose="step" id="ESRI_STEP_E788D6695D1F4D4C8C654F19C88ACFA2"><span purpose="cmd" id="GUID-57D1E8D6-5C45-4F1C-9C5A-EB5E5D780566">请确保您的门户连接处于活动状态，且您已使用具有创建内容和发布托管切片图层<a class="xref xref" href="../../../../zh-CN/portal/latest/use/roles.htm">权限</a>的帐户登录到您的组织。</span></li><li purpose="step" id="ESRI_STEP_AB46E88E20DF4D8595875A7F9DAE594E"><span purpose="cmd" id="GUID-C82E06F4-A789-43C9-9CC1-075FC6CBBDEF">要发布切片图层，请执行以下操作之一：</span><ul purpose="choices" id="ESRI_CHOICES_E075CF1DCF1849C384DA7F2BF32B6B90"><li purpose="choice" id="ESRI_CHOICE_342AA5D5C55D42A2B3342D28268B13EA">在<span class="uicontrol">内容</span>窗格中选择这些图层。右键单击选择集，然后单击<span class="uicontrol">共享为 Web 图层</span>。</li><li purpose="choice" id="ESRI_CHOICE_BD7893A685A64858BA967174E93F4538"><p id="GUID-2037F9D3-9801-4DA0-8568-BBAC52CDBA1F">要在地图中发布所有图层，请在<span class="uicontrol">共享</span>选项卡的<span class="uicontrol">共享为</span>组中单击 <span class="uicontrol">Web 图层</span>，然后单击<span class="uicontrol">发布 Web 图层</span>。</p></li></ul><div class="info" purpose="info"><p id="GUID-3F2E2D79-CBA3-4FDF-B462-BDBF00000261"><div class="panel trailer-1" id="GUID-C93F4694-1C8D-4DB7-97AF-C3A157732DD1"><h5 class="icon-ui-description trailer-0">提示：</h5><p id="GUID-43D5D0AB-DDAF-4558-9020-C560575F5DA7">如果<span class="uicontrol">共享为 Web 图层</span>菜单选项未激活，则可能由下列某一原因导致：<ul purpose="ul" id="UL_84BC6F67A8AC45EC99603FFA91CAE9E0"><li purpose="li" id="LI_BBC7CF879A0E474CB5920FE5706DED6F">登录时所使用的帐户不具有发布托管图层的权限。</li><li purpose="li" id="LI_D1FCD84B5909460F9263A462BC3D37BF">您的门户未对托管 Web 图层所需的托管服务器进行配置。</li><li purpose="li" id="LI_7A698769143A46C5AC528A15EB4F0575">正在尝试发布不受支持的多面体图层。</li></ul></p></div></p></div></li><li purpose="step" id="ESRI_STEP_8438D42147914AAFAE5CB8D42E563484"><span purpose="cmd" id="GUID-C6BD28D7-7541-481C-A9A5-3D173473DE47">输入切片图层的名称。图层默认保存到<span class="uicontrol">我的内容</span>中。您可以通过输入子文件夹名称或浏览已有的文件夹将图层保存到<span class="uicontrol">我的内容</span>的子文件夹中。</span></li><li purpose="step" id="ESRI_STEP_AC6DBB33A2AD4AF4BC6A0B89A8B24A17"><span purpose="cmd" id="GUID-3DA7E942-E844-410F-B9CD-4459451CA847">选择<span class="uicontrol">复制所有数据</span>。</span></li><li purpose="step" id="ESRI_STEP_4C75D0B8CF6F4ABAAA8D8DD04C62D224"><span purpose="cmd" id="GUID-AF8C72B8-20AF-4066-9C3F-9F579A2A1F1A">在<span class="uicontrol">图层类型</span>中选择<span class="uicontrol">切片</span>。</span><div class="stepresult" purpose="stepresult"><p id="GUID-8FB4FABD-AC0B-46D6-AAF6-6F50F29A99DF">这样会自动取消选中其他<span class="uicontrol">图层类型</span>选项，因为复制数据时仅可选中一个选项。</p></div></li><li purpose="step" id="ESRI_STEP_9094CD280BC64FDF995E625677E2A09A"><span purpose="cmd" id="GUID-094012F0-8F40-4344-9E83-83839E53BC96">提供切片图层的摘要和标签。</span></li><li purpose="step" id="ESRI_STEP_ADC6D166923643DB83C2512211D9C02C"><span purpose="cmd" id="GUID-DE4B930A-4397-4245-80E1-F8FBBCC65FE7">请指定应该访问托管切片图层的用户。发布的所有图层都会自动共享到您的组织内的个人工作空间中（<span class="uicontrol">我的内容</span>）。其他人无法访问您的内容，除非您在以下一项或多项中共享您的内容：</span><ul purpose="choices" id="ESRI_CHOICES_34FA2638148941F4A84A1C9625C95610"><li purpose="choice" id="ESRI_CHOICE_A63CB3E6D1354C53A5575A5DE8CAE77F">门户的名称 - 选择此选项可允许组织中所有经过身份验证的用户共享此图层。</li><li purpose="choice" id="ESRI_CHOICE_0F9DE9ECD5C14AD4ACACFF02287C1C72"><span class="uicontrol">所有人</span> - 选择该选项可使图层向具有您门户访问权限的任何人开放。</li><li purpose="choice" id="ESRI_CHOICE_2FFBB64F7F5F4A36A71DB54FD7F6BFAC"><span class="uicontrol">群组</span> - 您可以与您所在群组的成员共享图层。</li></ul></li><li purpose="step" id="ESRI_STEP_39A122C33C9C48728D82D2BAC36F6228"><span purpose="cmd" id="GUID-A08789B0-8941-4687-B293-AD399F89814C">单击<span class="uicontrol">配置</span>，然后单击<span class="uicontrol">配置 Web 图层属性</span>按钮以指定缓存设置。</span></li><li purpose="step" id="ESRI_STEP_AAB86989A4D5459AB21BB4D15F111CAD"><span purpose="cmd" id="GUID-79A907B5-5538-4B40-A385-2D10E1B24E05">选择<span class="uicontrol">切片方案</span>。</span></li><li purpose="step" id="ESRI_STEP_8B251398DD4246808AE993978C876E6E"><span purpose="cmd" id="GUID-F8F42D7C-EF57-4475-A678-DF964770DE29">调整并拖拽<span class="uicontrol">细节层次</span>条块来为您的切片图层指示最小和最大比例。</span><div class="stepresult" purpose="stepresult"><p id="GUID-E60EF6A4-75D1-4525-8934-E7984501B8B7">在您更改最小和最大比例时，生成缓存的估计大小会发生改变。</p></div></li><li purpose="step" id="ESRI_STEP_B0DBFC1CB9F44C69848E335918065D5B"><span purpose="cmd" id="GUID-E41A8B94-CB94-4E38-94A8-2E6E3676F8AB">选择构建切片缓存的时间和位置。</span><ul purpose="choices" id="ESRI_CHOICES_B9413A74019E475AB60F67A45267EB86"><li purpose="choice" id="ESRI_CHOICE_B373DCDD58B14B2995D79E81810726B6"> 在发布图层时，如果您希望在门户的托管服务器上构建切片，请选择<span class="uicontrol">在服务器上自动缓存</span>。</li><li purpose="choice" id="ESRI_CHOICE_7A63F3AE477B4C249479FF74DCC1C755">如果要在门户的托管服务器上构建和存储缓存，但您希望在发布后自己构建缓存，请选择<span class="uicontrol">在服务器上手动缓存</span>，在发布图层后在门户网站中打开切片图层，然后手动创建缓存。</li><li purpose="choice" id="ESRI_CHOICE_6761D9B44CDB4F68BB1EB6BFDFF35204">如果想要在 <span class="ph">ArcGIS Pro</span> 计算机上构建并打包缓存，请选择<span class="uicontrol">本地缓存</span>，然后在 <span class="ph">ArcGIS Pro</span> 计算机上指定一个位置以存储临时切片包。切片包将自动上传到门户的托管服务器以进行解包，并将缓存存储在此。</li></ul></li><li purpose="step" id="ESRI_STEP_DA5CB019BEBD41F680C3AAB9D7AED49F"><span purpose="cmd" id="GUID-E553DF60-3AA8-421C-92BD-B0DCD98DDD02">要允许用户下载地图切片以供离线使用，请选中<span class="uicontrol">允许客户端导出缓存切片</span>。</span></li><li purpose="step" id="ESRI_STEP_BBBF3CEBF9134E08B0D1614EFBEC3CF7"><span purpose="cmd" id="GUID-E3B23EBA-CA34-4837-831F-A1104DC4F814">如果选中了<span class="uicontrol">允许客户端导出缓存切片</span>，请使用<span class="uicontrol">导出限制为</span>字段指定客户端一次可离线使用的最大切片数量。</span></li><li purpose="step" id="ESRI_STEP_6797D24F0CDE4136AB9F88D3E46E0487"><span purpose="cmd" id="GUID-6D377671-9BDD-423D-99ED-8420B7A92ADB">请单击<span class="uicontrol">内容</span>选项卡来确认切片图层将会包含您所需的数据图层。</span></li><li purpose="step" id="ESRI_STEP_830B9EBC82BA4C109EF6C91FE884EEDF"><span purpose="cmd" id="GUID-E36AF0ED-B81A-40CB-8694-15B121045DD2">请单击<span class="uicontrol">分析</span>来检查错误或故障。</span><div class="stepresult" purpose="stepresult"><p id="GUID-B664737E-9F68-49BF-8254-15FDC0A77DB4">任何发现的问题都将在<span class="uicontrol">消息</span>选项卡上列出。右键单击每条消息以获取详细信息，阅读错误或警告帮助，然后获取建议的修复方法。在发布前必须修复错误。可以修复警告，从而进一步完善托管切片图层的性能和外观，但并非必需操作。</p></div></li><li purpose="step" id="ESRI_STEP_9CD9BBC90304418887A7E0FB1DA12AAC"><span purpose="cmd" id="GUID-815DED01-BD81-4E50-BD86-CCC6FFCD30A6">解决错误和某些警告后，单击<span class="uicontrol">发布</span> 。</span><div class="info" purpose="info"><div class="panel trailer-1 note" id="GUID-9E4A22E6-1F02-4F7E-862C-518A58647D1F"><h5 class="icon-ui-comment trailer-0">注：</h5>此时会将您的数据复制到服务器。数据大小、网速和带宽会影响发布过程所花费的时间。</div></div></li></ol></div><section class="result padded-anchor" id="ESRI_RESULT_C072B3F1667A4CA0829D52E6FFDE1CE3" purpose="result"><p id="GUID-5302E61D-2E58-4377-9952-D3DFA6A3819B">当完成发布时，您可以单击<span class="uicontrol">管理 web 图层</span>以打开门户网站。</p></section></section></section><section class="section1 padded-anchor" id="ESRI_SECTION1_9DDC0AFDD2AD4AF59CD36A29721AB67A" purpose="section1"><h2>在 <span class="ph">ArcGIS Pro</span> 中构建切片包，然后将其上传到您的组织</h2><p id="GUID-2748AAB3-6CFC-4781-9F0C-CC113620FD40">使用<span purpose="gptoolref"><a class="xref xref" esrisubtype="extrel" hrefpfx="https://desktop.arcgis.com/zh-cn/arcmap/latest/tools" href="https://desktop.arcgis.com/zh-cn/arcmap/latest/tools/data-management-toolbox/create-map-tile-package.htm">创建地图切片包</a></span>地理处理工具来创建切片包、将包添加到您的组织并发布切片图层。</p><p id="GUID-CE78866E-04A9-4486-A73B-26D9212CC2D0">从 <span class="ph">ArcGIS Pro</span> 2.3 开始，您可以将此地理处理工具的输出指定为 <span class="usertext">.tpk</span> 文件或 <span class="usertext">.tpkx</span> 文件。新的 <span class="usertext">.tpkx</span> 格式是一种开放式规范格式，可使用简化的文件结构，并且可在云和共享网络位置运行时提供更佳性能。以上任一格式均可以在此工作流中使用。</p><section class="wfsteps padded-anchor" purpose="wfsteps"><h4></h4><div class="steps" id="ESRI_STEPS_8C53329F52AB4FDAB9558956FDA7DFD1"><ol class="list-numbered" purpose="ol"><li purpose="step" id="ESRI_STEP_44455C6B955545CBA7D0BF32AB66A150"><span purpose="cmd" id="GUID-F26804A5-9AF3-494D-9B77-A94C84FC7292">打开包含待打包数据的工程。</span></li><li purpose="step" id="ESRI_STEP_3D16BFF491B64622BA756C463D8E9657"><span purpose="cmd" id="GUID-B29BC554-AB4E-4407-AC70-D071BFE22433">打开并运行<span purpose="gptoolref">创建地图切片包</span>地理处理工具。</span></li><li purpose="step" id="ESRI_STEP_A5894E3E053D44E6AEB3C962F271D9D1" ishcondition="agol_plat=portal"><span purpose="cmd" id="GUID-6418A112-01D9-491B-BB6E-04F504125912">切片包生成完成后，使用具有创建内容和发布托管切片图层<a class="xref xref" href="../../../../zh-CN/portal/latest/use/roles.htm">权限</a>的帐户登录您的门户，然后单击<span class="uicontrol">内容 <span class="greaterthan">&gt;</span> 我的内容</span>。</span></li><li purpose="step" id="ESRI_STEP_A7CCCBCDAC7E4D85828D1EBC1AEEAD0E"><span purpose="cmd" id="GUID-FAE519F8-C0BE-4480-8A6A-70D538843240"><span class="uicontrol">从我的计算机</span><a class="xref xref" href="../../../../zh-CN/portal/latest/use/add-items.htm">添加切片包</a>。</span></li><li purpose="step" id="ESRI_STEP_88506C8019384161910B039089F99E33"><span purpose="cmd" id="GUID-E7E13629-D557-44E1-BCEC-87BD57614E4B">选中<span class="uicontrol">将此文件发布为托管图层</span>复选框。</span></li><li purpose="step" id="ESRI_STEP_6CED69E68BED4D75AFBEF941FF1FD900"><span purpose="cmd" id="GUID-F5FBDE1F-57C0-4A92-B877-B462E2169028">输入标题。</span></li><li purpose="step" id="ESRI_STEP_4833797A6C0144DE9CD16C8CD5584DC7" ishcondition="agol_plat=portal"><span purpose="cmd">如果门户管理员已配置内容类别，请单击<span class="uicontrol">分配类别</span>，然后最多选择 20 个类别以方便其他用户查找您的项目。您也可以使用<span class="uicontrol">过滤器类别</span>框来缩小类别列表范围。</span></li><li purpose="step" id="ESRI_STEP_F66124EEDD644E4D88337A23B7F63C80"><span purpose="cmd" id="GUID-A2D200BD-A6E4-4903-84F9-0894C0358674">输入标签术语，并以逗号分隔。</span><div class="info" purpose="info"><p id="GUID-C8B93B4D-5E9C-4CE1-B9F0-63760D5B0B58">标签是一些词语或短语，用于描述项目并帮助您在搜索时找到项目。<span class="usertext">Federal land</span>将被视为一个标签，而
<span class="usertext">Federal,land</span>则被视为两个标签。</p></div></li><li purpose="step" id="ESRI_STEP_E29C41D039BF487FA8D471F29D41B1E1"><span purpose="cmd">单击<span class="uicontrol">添加项目</span>。</span></li></ol></div><section class="result padded-anchor" id="ESRI_RESULT_580B8764B46A442EAD5A277517405E8D" purpose="result"><p id="GUID-863F4088-D138-440C-BA16-31D558D0D47C" ishcondition="agol_plat=portal">切片已解包，且已在您的门户中创建托管切片图层。您将能够在<span class="uicontrol">我的内容</span>中看到该地图切片和切片包。</p></section></section><section class="section2 padded-anchor" id="ESRI_SECTION2_5D48594C5AE8493E93DA2071DBE076C8" purpose="section2"><h3>发布大型切片包</h3><p id="GUID-8FB85F3C-97C1-45F8-A84D-0C5035F08155">要构建并共享大量数据，<span class="ph">Esri</span> 建议您使用<span class="uicontrol">切片缓存</span>工具集而非上述工作流。这些工具可使用多核进行处理以提升切片生成和发布性能。</p><section class="wfsteps padded-anchor" purpose="wfsteps"><h4></h4><section class="context padded-anchor" id="ESRI_CONTEXT_6A766DED815643A0BE7AC3553010CB0A" purpose="context"><p id="GUID-71B2B417-74E2-4586-85B6-4EEAECE51250">在 <span class="ph">ArcGIS Pro</span> 中执行地理处理工具。</p></section><div class="steps" id="ESRI_STEPS_52F6F0932E7A46EF9E33E2A1FA2F607D"><ol class="list-numbered" purpose="ol"><li purpose="step" id="ESRI_STEP_5612E62AB9F54BEF86EB7FBD82F684D1"><span purpose="cmd">可以运行<span purpose="gptoolref">创建地图切片包</span>地理处理工具以一步创建切片包，或者按以下顺序运行以下地理处理工具：</span><div class="substeps" id="ESRI_SUBSTEPS_3265F9288B0A4955B080BF5EB3706212" purpose="substeps"><ol class="list-numbered" purpose="ol"><li purpose="substep" id="ESRI_SUBSTEP_1534C07EAB28430D89F40FEB68E3B429"><span purpose="cmd">运行<span purpose="gptoolref">生成切片缓存切片方案</span>工具以定义切片格网和图像格式。</span></li><li purpose="substep" id="ESRI_SUBSTEP_5AEC21EDC39F4836B1489A2373DA37C1"><span purpose="cmd">运行<span purpose="gptoolref">管理切片缓存</span>工具以构建切片。</span></li><li purpose="substep" id="ESRI_SUBSTEP_AF73A974B9154257879BC39B20FA7100"><span purpose="cmd">运行<span purpose="gptoolref">导出切片缓存</span>工具以创建切片包。</span></li></ol></div><div class="info" purpose="info"><p id="GUID-018E98C6-01F3-4768-9B94-54910CD9B535">要在特定范围或细节层次下生成缓存，请使用以上列出的三个工具。</p></div></li><li purpose="step" id="ESRI_STEP_D8D3C693E8B44EE98666C5A075B0FC1C" ishcondition="agol_plat=portal"><span purpose="cmd">运行<span purpose="gptoolref">共享包</span>工具（位于<span class="uicontrol">打包</span>工具集中）以将切片上传至您的门户。</span></li><li purpose="step" id="ESRI_STEP_05DB628937984978AC972B553709D277" ishcondition="agol_plat=portal"><span purpose="cmd">切片包生成完成后，使用在 <span class="ph">ArcGIS Pro</span> 中创建切片包时所用的同一帐户登录您的门户，然后单击<span class="uicontrol">内容 <span class="greaterthan">&gt;</span> 我的内容</span>。</span></li><li purpose="step" id="ESRI_STEP_7D6A3B0672EC47CB8C4549D52D85672D"><span purpose="cmd">单击切片包以显示其项目详细信息页面。</span></li><li purpose="step" id="ESRI_STEP_0724E75E43CD437B9F7AD0A83174B032"><span purpose="cmd">单击<span class="uicontrol">发布</span>。</span></li><li purpose="step" id="ESRI_STEP_1B814B501F5744F3838A3A5A450DD709"><span purpose="cmd">输入标题和标签。</span></li><li purpose="step" id="ESRI_STEP_D850D471F15D4EC7A98792982A203174" ishcondition="agol_plat=portal"><span purpose="cmd">如果门户管理员已配置内容类别，请单击<span class="uicontrol">分配类别</span>，然后最多选择 20 个类别以方便其他用户查找您的项目。您也可以使用<span class="uicontrol">过滤器类别</span>框来缩小类别列表范围。</span></li><li purpose="step" id="ESRI_STEP_ED81F161843D4B32925033E2CEFB4520"><span purpose="cmd">单击<span class="uicontrol">发布</span>。</span></li></ol></div><section class="result padded-anchor" id="ESRI_RESULT_DCC8A3E394B847C08A549B694EF26C28" purpose="result"><p id="GUID-2054265B-42A1-4B5E-8BCE-2A2073677C8E" ishcondition="agol_plat=portal">切片已解包，且已在您的门户中创建托管切片图层。您应该在<span class="uicontrol">我的内容</span>中看到该图层。</p></section></section></section></section><section class="section1 padded-anchor" id="ESRI_SECTION1_A2E4F9EB87454D84B66788D7D4C027EC" purpose="section1"><h2>在 <span class="ph">ArcMap</span> 中定义并发布地图</h2><p id="GUID-B28F63D3-A1F0-4ED7-BC34-78D13DFC7965" ishcondition="agol_plat=portal">在 <span class="ph">ArcMap</span> 中，您可以发布要在门户中进行托管的切片图层。</p><div class="panel trailer-1 note" id="GUID-5A3B803A-6CCC-4AD5-A3AB-31960088B5F7"><h5 class="icon-ui-comment trailer-0">注：</h5><p id="GUID-08E155CE-C384-432C-B181-32ECA4A61EC7">如果已对 <span class="ph">ArcMap</span> 中的图层应用了定义查询，则 ArcGIS 将把定义查询应用到已发布的托管切片图层。<span class="ph">但是，所有数据都会复制到 <span class="ph">ArcGIS Enterprise</span> 门户。如果希望发布数据的子集，则必须将子集导出到其他要素类中，然后将其发布。</span></p></div><p id="GUID-73ED6308-8EF4-46A5-98E6-BFD2408815CC" ishcondition="agol_plat=portal">请确保启动 <span class="ph">ArcGIS Desktop</span> 前 <span class="ph">ArcMap</span> 已连接到您的门户。</p><section class="wfsteps padded-anchor" purpose="wfsteps"><h4></h4><div class="steps" id="ESRI_STEPS_1562B64413D3431E9AEC741550D11EDE"><ol class="list-numbered" purpose="ol"><li purpose="step" id="GUID-3E4954A7-96F3-4711-845B-78D21AD8CD56"><span purpose="cmd" id="GUID-889D2619-521F-4240-9390-5F2D6F113AF5">启动 <span class="ph">ArcMap</span> 并打开您希望发布的地图。</span></li><li purpose="step" id="ESRI_STEP_2B6FFCE6940C48A4A6A9726A4A2064F9"><span purpose="cmd" id="GUID-9CD35AE6-30D3-43C2-A63D-B619091DE1C4"><span class="ph">使用具有创建内容和发布托管切片图层的<a class="xref xref" href="../../../../zh-CN/portal/latest/use/roles.htm">权限</a>的组织帐户登录您的门户。</span> </span><div class="substeps" id="ESRI_SUBSTEPS_62D64DB7DF0C406ABAB6483A0760281C" purpose="substeps"><ol class="list-numbered" purpose="ol"><li purpose="substep" id="ESRI_SUBSTEP_BE62CE288AB042C3A03B21692469E771"><span purpose="cmd" id="GUID-9484BFCF-DA1D-4E4A-A2DC-A4059159F89A">单击<span class="uicontrol">文件 <span class="greaterthan">&gt;</span> 登录</span>。</span></li><li purpose="substep" id="ESRI_SUBSTEP_2B94B39B03EE4EF9926F17E170855DD9"><span purpose="cmd" id="GUID-61649689-40F5-4BBF-94C2-B6199D61D1FF"><span class="ph">输入您的门户用户名和密码，然后单击<span class="uicontrol">登录</span>。</span></span></li></ol></div></li><div class="stepinfo" purpose="stepinfo">现在，发布地图。</div><li purpose="step" id="ESRI_STEP_083777A1EB4548798D960966CE740691"><span purpose="cmd" id="GUID-5A1C5994-DD4C-4DA3-8595-5EE2AF1E8002">单击<span class="uicontrol">文件 <span class="greaterthan">&gt;</span> 共享为 <span class="greaterthan">&gt;</span> 服务</span>。</span></li><li purpose="step" id="ESRI_STEP_306FAA8E3BAE4033BCACF97A93E3BFC7"><span purpose="cmd" id="GUID-43E6D46A-5785-40CD-B936-CAC43DFEB688">选择<span class="uicontrol">发布服务</span>，然后单击<span class="uicontrol">下一步</span>。</span><div class="info" purpose="info"><div class="panel trailer-1" id="GUID-E7D93EFF-6BDE-40A9-9E28-3E565C48E2C7"><h5 class="icon-ui-notice-triangle trailer-0">警告：</h5><p id="GUID-5AC83198-6B4A-4F5B-A1F7-4BE401432F18"><span class="ph">如果选择改为覆盖服务，则现有地图切片项目将从门户中删除，并会创建一个具有相同名称的新项目。</span> 新项目创建于根文件夹中并会分配得到一个新 ID。您必须重新配置共享，如有必要，请将项目移回到重新发布前其所在的文件夹。</p></div></div></li><li purpose="step" id="ESRI_STEP_4A5BFB409453480D8DD50951C51E7788"><span purpose="cmd" id="GUID-27847EF9-1F7B-4166-817D-A531ABCF7A6D">在连接类型的下拉列表中，选择<span class="uicontrol">我的托管服务</span>。然后输入切片名称并单击<span class="uicontrol">继续</span>。</span></li><li purpose="step" id="ESRI_STEP_732D1B127E304B75956588DAC9245AC9"><span purpose="cmd" id="GUID-FD82CDCF-668A-4E15-BCFD-99B844D9EA54">在<span class="uicontrol">服务编辑者</span>中设置所需属性。此处，您可以选择用户可对切片执行的操作，还可精细控制切片对最终用户的显示方式。</span><div class="info" purpose="info"><p id="GUID-2C3E4A32-08BF-4FBC-AE05-33E6F7BDC2E9">有关如何实现切片的最佳配置以进行部署的信息，请参阅 <span class="ph">ArcGIS Server</span> 帮助中的<a class="xref xref" esrisubtype="extrel" hrefpfx="/zh-cn/server/latest/publish-services" href="../../../../zh-CN/server/latest/publish-services/windows/tuning-and-configuring-services.htm">调整和配置服务</a>。该主题中所引述的一些属性仅适用于 <span class="ph">ArcGIS Server</span>，在使用托管切片图层时不适用。</p><div class="panel trailer-1" id="GUID-2BDD0009-5BF8-4FEE-A1D0-BC4E439E601D"><h5 class="icon-ui-description trailer-0">提示：</h5><p id="GUID-54787971-E241-4345-AD0A-0344173041DB">  如果在此会话期间关闭了<span class="uicontrol">服务编辑器</span>，则系统将提示您将作品保存为草稿服务。草稿服务使您能够在以后返回到该界面以继续完成服务配置工作。默认情况下，草稿服务保存在“我的托管地图”连接的<span class="uicontrol">草稿</span>文件夹中。有关详细信息，请参阅 <span class="ph">ArcGIS Server</span> 帮助中的<a class="xref xref" esrisubtype="extrel" hrefpfx="/zh-cn/server/latest/publish-services" href="../../../../zh-CN/server/latest/publish-services/windows/about-draft-services.htm">关于草稿服务</a>。</p></div></div></li><div class="stepinfo" purpose="stepinfo">您还需要设置几个托管切片图层所特有的属性。以下步骤详细介绍了这些操作。</div><li purpose="step" id="ESRI_STEP_8AA82A0E483E4FD3AAD69F028A0BBA8B"><span purpose="cmd" id="GUID-52AA1BFC-46C9-4C32-A109-5DBFFE947C20">在<span class="uicontrol">服务编辑者</span>的左侧窗格中，单击<span class="uicontrol">功能</span>，然后选中<span class="uicontrol">切片地图</span>将地图显示为切片图层。如果希望在将图层添加到 <span class="ph">Map Viewer</span> 时<a class="xref xref" href="../../../../zh-CN/portal/latest/use/configure-pop-ups.htm#ESRI_SECTION1_9E13E02AABA74D5DA2DF1A34F7FB3C63">为图层配置弹出窗口</a>，请选中<span class="uicontrol">要素访问</span>来发布包含切片的要素图层。</span><div class="info" purpose="info"><p id="GUID-A51673BB-0B68-4E6B-8BF5-ABF377254C0C">可单击<span class="uicontrol">服务编辑者</span>左侧窗格中的子项<span class="uicontrol">切片绘制</span>来设置与客户端发布的切片图层操作相关的高级属性。</p></div></li><li purpose="step" id="ESRI_STEP_09ECA9AF034544E59765B8A5219DD0C6"><span purpose="cmd" id="GUID-105CA1B0-6398-44C7-807A-90C80CCA1A46">单击<span class="uicontrol">缓存</span>项目设置切片缓存的属性。有关详细步骤，请参阅 <span class="ph">ArcGIS Server</span> 帮助中的<a class="xref xref" esrisubtype="extrel" hrefpfx="/zh-cn/server/latest/publish-services" href="../../../../zh-CN/server/latest/publish-services/windows/creating-a-map-cache.htm">创建地图缓存</a>。请注意，一些高级缓存设置仅在直接向 <span class="ph">ArcGIS Server</span> 发布时适用。</span></li><li purpose="step" id="ESRI_STEP_1796FD2C311C43E095D8D503F11DB2AB"><span purpose="cmd" id="GUID-A96390D2-225B-4153-8A1C-DEF9EB05920C">在<span class="uicontrol">服务编辑者</span>的左侧窗格中，单击<span class="uicontrol">项目描述</span>并提供切片图层的摘要和标签。您需要先输入此信息，然后才能进行发布。有关详细信息，请参阅 <span class="ph">ArcGIS Server</span> 帮助中的<a class="xref xref" esrisubtype="extrel" hrefpfx="https://desktop.arcgis.com/zh-cn/arcmap/latest/map" href="https://desktop.arcgis.com/zh-cn/arcmap/latest/map/publish-map-services/setting-map-service-properties.htm#ESRI_SECTION1_4BF56084B0FE40FF9ADB6D0944B9F91F">设置地图服务属性</a>的项目描述部分。</span></li><li purpose="step" id="ESRI_STEP_533689D637FA44D3BDD4A677B5C6EDE0" ishcondition="agol_plat=portal"><span purpose="cmd" id="GUID-DD6FA8CF-A147-4CE7-B2E2-346058AD510C">在<span class="uicontrol">服务编辑者</span>的左侧窗格中，单击<span class="uicontrol">共享</span>，然后选择共享托管切片图层的对象。默认情况下，您的托管切片图层是私有的，只有您自己可以访问。可将它与所有人、您组织的所有成员或某些群组的成员共享。</span></li><li purpose="step" id="ESRI_STEP_EA81C018E17846A18D7EF04D503D6ABF"><span purpose="cmd" id="GUID-696FEC4E-6E99-4E5F-9B12-3047F39C7D84">在<span class="uicontrol">服务编辑者</span>中，单击<span class="uicontrol">分析</span> <img purpose="img" placement="inline" alt="分析" title="分析" src="GUID-98E22D54-9700-4516-9382-BC63CF8DD4E7-web.png">。</span><div class="stepresult" purpose="stepresult"><p id="GUID-0EF23E1C-B77A-47D6-A9C5-E4FDC2953F92">该操作会对地图进行检查，确定能否将其发布。必须先在<span class="uicontrol">准备</span>窗口中修复<span class="uicontrol">错误</span> <img purpose="img" placement="inline" alt="错误" title="错误" src="GUID-8D5ED5A4-D38D-4453-AEB7-5E8E5E84C727-web.png"> 才能进行发布。另外，您还可以修复警告和通知消息，以进一步完善所发布切片的性能和外观。</p></div></li><li purpose="step" id="ESRI_STEP_3C45707A80344E8180246803E07ABF57"><span purpose="cmd" id="GUID-2ACEE12A-FDBC-4368-BEBB-E4A3A4210A69">还可以单击<span class="uicontrol">服务编辑者</span>中的<span class="uicontrol">预览</span> <img purpose="img" placement="inline" alt="预览" title="预览" src="GUID-5478C01F-ABE5-43E5-9A85-F7CED31A67F8-web.png">。这样您便可以了解在 Web 上查看切片图层时切片图层的外观。</span></li><li purpose="step" id="ESRI_STEP_5D5C8E73E0394C78AFCD05301423CC6A"><span purpose="cmd" id="GUID-31EBCF63-A2D8-40DA-AE6D-7D5A238ECC00">修复错误以及警告和消息（可选）后，单击<span class="uicontrol">发布</span> <img purpose="img" placement="inline" alt="发布" title="发布" src="GUID-6A9846D8-6F36-436A-85D4-B9D055A4760C-web.png">。</span><div class="info" purpose="info"><div class="panel trailer-1 note" id="GUID-409E197D-198E-47D1-A5C4-C77E2232E2F2"><h5 class="icon-ui-comment trailer-0">注：</h5><p id="GUID-4D3AC7EB-057F-47D4-873A-9DE381EFCCEA"> <span class="ph">此时会将您的数据复制到托管服务器。数据大小、网络连接速度和带宽会影响发布过程所花费的时间。</span> 还应留出生成切片所需的时间。</p></div></div></li></ol></div><section class="result padded-anchor" id="ESRI_RESULT_07806782355E40C8963FAA6AF802C424" purpose="result"><p id="GUID-990984FE-64C6-4BA4-A95D-5D3365E278A5" ishcondition="agol_plat=portal">在您门户上发布切片图层后，可在<span class="uicontrol">目录</span>窗口中展开<span class="uicontrol">我的托管服务</span>节点进行查看。</p><p id="GUID-E4BDF3C1-EFFE-4CDA-A84C-CF16B01D2899" ishcondition="agol_plat=portal">托管切片图层在门户网站的<span class="uicontrol">我的内容</span>选项卡中列为两个独立的项目：“切片”和“服务定义”。服务定义是一个压缩文件，内含地图、地图数据以及如何发布切片的详细信息。服务定义可传输并发布至任何运行 <span class="ph">ArcGIS Server</span> 的计算机上。</p></section></section></section><section class="section1 padded-anchor" id="GUID-C467C9D7-443D-48D6-90AB-8204E3B9FD83" purpose="section1"><h2>在 <span class="ph">ArcMap</span> 中构建并共享切片包，然后发布</h2><p id="GUID-07087D4F-DD6B-4E14-AEBE-4480A8964070">利用 <span class="ph">ArcMap</span> 可以为地图文档构建切片并将其存储在易于传输的切片包文件中。<span class="ph">您可以在 <span class="ph">ArcMap</span> 中创建切片包，将其共享到您的门户，并将其作为托管切片图层进行发布。</span></p><p id="GUID-CBF192D2-FA1D-48F4-8B24-94B7CA86794A"><div class="panel trailer-1" id="GUID-894064F3-5166-4FD9-B4C3-0F54F0DF7716"><h5 class="icon-ui-description trailer-0">提示：</h5><p id="GUID-168753C1-D6C2-4AD5-972D-332A43E3ED6E">如果希望<a class="xref xref" href="../../../../zh-CN/portal/latest/use/configure-pop-ups.htm">配置弹出窗口</a>，则必须连同托管切片图层发布要素图层。</p></div></p><p id="GUID-17F7E96D-E6BB-4128-BAD1-B1089CFA945E">可通过两种方式从 <span class="ph">ArcMap</span> 创建并共享切片包。<ul purpose="ul" id="UL_C3A444E3436B48CA9C984EE4F987E65F"><li purpose="li" id="LI_E2C4AF4DA00E447AAB1BEE74EDB2ACE8">若要打包并共享少量数据（少于 1 GB），请直接从地图创建并共享切片包。<span class="ph">当在门户网站中发布包时，地图文件元素（比如，图例和文本元素）会被保留。</span></li><li purpose="li" id="LI_56DAB9A5650948C0AADC750A3C02E25E">如果拥有超过 1 GB 的数据，请使用地理处理工具打包并分享切片。此方法仅会保留切片从切片包发布切片时的数据，可提升切片创建性能。</li></ul></p><p id="GUID-AEE7072F-A8B8-407E-BD70-CF93184F1F69">在 <span class="ph">ArcMap</span> 10.7 中，您可以将任一工作流的结果指定为 <span class="usertext">.tpk</span> 或 <span class="usertext">.tpkx</span> 文件。新的 <span class="usertext">.tpkx</span> 格式是一种开放式规范格式，可使用简化的文件结构，并且可在云和共享网络位置运行时提供更佳性能。任何一种格式均可以在以下工作流中使用。</p><section class="section2 padded-anchor" id="ESRI_SECTION2_16DF8FE6C13C4D8F8B598FD2766F3DC5" purpose="section2"><h3>发布小型切片包</h3><p id="GUID-56484544-DBAA-4B34-9163-865533D9C97C">如果在 <span class="ph">ArcMap</span> 中创建的切片包小于 1 GB，则请按以下工作流进行发布：</p><section class="wfsteps padded-anchor" purpose="wfsteps"><h4></h4><div class="steps" id="ESRI_STEPS_B1ACC1A389714C10898EBF484E64C2A1"><ol class="list-numbered" purpose="ol"><li purpose="step" id="ESRI_STEP_85D0B9567A5C43C1A8871F5AFCA02E5F"><span purpose="cmd" id="GUID-1BFFBFDA-0550-4E02-9B55-E734CAF310D0">在 <span class="ph">ArcMap</span> 中打开地图。</span></li><li purpose="step" id="ESRI_STEP_310A8607ED864455975F3840CCBE9C8B" ishcondition="agol_plat=portal"><span purpose="cmd" id="GUID-4A7C29E4-922A-4CD9-A8A5-CD04FAED2A10">使用具有创建内容和发布托管切片图层的<a class="xref xref" href="../../../../zh-CN/portal/latest/use/roles.htm">权限</a>的组织帐户登录您的门户。</span></li><li purpose="step" id="ESRI_STEP_C4DB1E926F954EE5B265708D85C976F2"><span purpose="cmd" id="GUID-7C4C0E08-76BB-4B50-B480-4BFAE8FAFAF1">单击<span class="uicontrol">自定义 <span class="greaterthan">&gt;</span> ArcMap 选项 <span class="greaterthan">&gt;</span> 共享</span>并确保<span class="uicontrol">启用 ArcGIS Runtime 工具</span>已选中。</span><div class="info" purpose="info"><p id="GUID-95AFD34F-2B0E-474D-AC47-62FA0D62928B">这样即可启用您将在下一步中用到的菜单选项。</p></div></li><li purpose="step" id="ESRI_STEP_7A4D16BCDA464809A385622175016D50"><span purpose="cmd" id="GUID-1BEB77B9-F2E7-48A0-A9D1-1EB3B4881D4E">在 <span class="ph">ArcMap</span> 中，单击<span class="uicontrol">文件 <span class="greaterthan">&gt;</span> 共享为 <span class="greaterthan">&gt;</span> 切片包</span>。</span></li><li purpose="step" id="ESRI_STEP_4A25511E83EC4407A94AF5DBBB009918"><span purpose="cmd" id="GUID-9501828A-E8CF-4F9A-98F1-F460FBF2F388">配置下列子步骤中的所有设置。其余设置可由您自行选择配置。</span><div class="substeps" id="ESRI_SUBSTEPS_03837259001A4BA3AEB0129E5A1F1525" purpose="substeps"><ol class="list-numbered" purpose="ol"><li purpose="substep" id="ESRI_SUBSTEP_29005BD4ED454CBDA85E7F627A2DCA99" ishcondition="agol_plat=portal"><span purpose="cmd" id="GUID-88D34C02-C7E7-466C-8E3D-299790382CF3">在<span class="uicontrol">切片包</span>选项卡上，选择<span class="uicontrol">将包上传到我的 ArcGIS 门户帐户</span>。</span></li><li purpose="substep" id="ESRI_SUBSTEP_CFDAFE67DDC84D579F8E7CCBE5F393FE"><span purpose="cmd" id="GUID-70314D3D-CA04-4D5D-AD82-2B236155A32E">在<span class="uicontrol">切片格式</span>选项卡上，选择 <span class="uicontrol">ArcGIS Online/Bing 地图/Google 地图</span>作为<span class="uicontrol">切片方案</span>。</span></li><li purpose="substep" id="ESRI_SUBSTEP_C80CF9252DA34E85B8B585B0AC03780D"><span purpose="cmd" id="GUID-F1FA8017-3526-4943-BFAF-1CD07B415302">在<span class="uicontrol">项目描述</span>选项卡上，提供标记为必填的项目。</span></li><li purpose="substep" id="ESRI_SUBSTEP_082BF225C13D4F44A2C18ABC97B7A310"><span purpose="cmd" id="GUID-7B4784BE-CFC2-449B-8360-9B27CD29BCB6">在<span class="uicontrol">共享</span>选项卡上，可以选择与公众或特定的组共享包。</span></li></ol></div></li><li purpose="step" id="ESRI_STEP_5415C63D14F542D2A629E3B94B2C1BA7"><span purpose="cmd" id="GUID-2B7AF32B-F54B-4EA0-827D-FA85EE3CFBF3">单击<span class="uicontrol">共享</span>。</span><div class="info" purpose="info"><p id="GUID-8C150D39-8D7E-4C94-9838-850DCDC53DD0">在 <span class="ph">ArcMap</span> 创建切片包之前，可能会提示您保存地图。</p><p id="GUID-1A0FCA9D-AEF0-437F-ABDC-026FC7731616">生成切片包可能需要一些时间，尤其是在包括较大比例的情况下。</p></div></li><li purpose="step" id="ESRI_STEP_643C2784A2754348A2D58BF934D32364" ishcondition="agol_plat=portal"><span purpose="cmd" id="GUID-4AFCD3F0-02EE-47A0-A655-A2782B9ABFE7">切片包生成完成后，使用在 <span class="ph">ArcMap</span> 中创建切片包时所用的同一帐户登录您的门户，然后单击<span class="uicontrol">内容 <span class="greaterthan">&gt;</span> 我的内容</span>。</span></li><li purpose="step" id="ESRI_STEP_1F57618281794A4B8072066514227C81"><span purpose="cmd" id="GUID-F9E64B49-2449-4432-8EB0-A00BEA55F4D5">单击切片包以显示其项目详细信息页面。</span></li><li purpose="step" id="ESRI_STEP_27E16085D0ED4D49AB48C477F7EC0DC9"><span purpose="cmd" id="GUID-7F3B444C-97AF-4F19-8385-4ACBF3FBE292">单击<span class="uicontrol">发布</span>。</span></li><li purpose="step" id="ESRI_STEP_8D21677A7C674EE7BA16586BBFC7D46C"><span purpose="cmd" id="GUID-88072FAF-0EE8-445F-959D-49C2D406F262">输入标题和标签，然后单击<span class="uicontrol">发布</span></span></li></ol></div><section class="result padded-anchor" id="ESRI_RESULT_EF1C1E7827C84E7CA2087CCDC3E6B9C8" purpose="result"><p id="GUID-CEB8C676-E9EB-456C-B889-05FBCA0C3B44" ishcondition="agol_plat=portal">切片已解包，且已在您的门户中创建托管切片图层。您应该在<span class="uicontrol">我的内容</span>中看到该图层。</p></section></section></section><section class="section2 padded-anchor" id="ESRI_SECTION2_274FC7BDA268429E8F4B01FF1CACFEBA" purpose="section2"><h3>发布大型切片包</h3><p id="GUID-322C3616-777E-4DAA-9407-8A82A23DCFD8">要构建并共享大量数据，<span class="ph">Esri</span> 建议您使用<span class="uicontrol">切片缓存</span>工具集而非上述工作流。这些工具可使用多核进行处理以提升切片生成和发布性能。</p><section class="wfsteps padded-anchor" purpose="wfsteps"><h4></h4><section class="context padded-anchor" id="ESRI_CONTEXT_F3A23E7D57764D97A97823E8E4260F3B" purpose="context"><p id="GUID-809174B0-86B6-47B2-AF32-942037B16F9F">按以下顺序执行上述工具。</p></section><div class="steps" id="ESRI_STEPS_2891918393144931AA603AF196266799"><ol class="list-numbered" purpose="ol"><li purpose="step" id="ESRI_STEP_A59E4BAD32564D5581B05E72B6107079"><span purpose="cmd" id="GUID-0389DE29-7CE2-4BBE-A656-6AD7714A0601">运行<span class="uicontrol">生成切片缓存切片方案</span>定义切片格网和图像格式。</span></li><li purpose="step" id="ESRI_STEP_AFE3A109FB0943B485BC195BCDA13AE3"><span purpose="cmd" id="GUID-4CFABC56-F409-44CA-B0B3-521B2ACFBDE0">运行<span class="uicontrol">管理切片缓存</span>构建切片。</span></li><li purpose="step" id="ESRI_STEP_F8857EBDD24D4A278ACD5204A2D64931"><span purpose="cmd" id="GUID-8F7690A7-4B6F-4DF7-9FBA-EB8BDBA571D1">运行<span class="uicontrol">导出切片缓存</span>创建切片包。</span></li><li purpose="step" id="ESRI_STEP_A7A5F965814E445D863269AF062965C1" ishcondition="agol_plat=portal"><span purpose="cmd" id="GUID-4F22C30F-F33C-4DC2-9268-2B2B79E04BC7">运行<span class="uicontrol">共享包</span>（位于<span class="uicontrol">打包</span>工具集中）将切片上传至您的门户。</span></li><li purpose="step" id="ESRI_STEP_C4220EC4881048408AF311B3D54F1BCF" ishcondition="agol_plat=portal"><span purpose="cmd">切片包生成完成后，使用在 <span class="ph">ArcMap</span> 中创建切片包时所用的同一帐户登录您的门户，然后单击<span class="uicontrol">内容 <span class="greaterthan">&gt;</span> 我的内容</span>。</span></li><li purpose="step" id="ESRI_STEP_BC1B473524324A388121584029E9918A"><span purpose="cmd">单击切片包以显示其项目详细信息页面。</span></li><li purpose="step" id="ESRI_STEP_451F47170B4647BAA8C7C69E29B210C1"><span purpose="cmd">单击<span class="uicontrol">发布</span>。</span></li><li purpose="step" id="ESRI_STEP_40191F2DB1A74FB58AEFF824ADC06133"><span purpose="cmd">输入标题和标签。</span></li><li purpose="step" id="ESRI_STEP_2C0B56BECD5C420B9F27B06C23650531" ishcondition="agol_plat=portal"><span purpose="cmd">如果门户管理员已配置内容类别，请单击<span class="uicontrol">分配类别</span>，然后最多选择 20 个类别以方便其他用户查找您的项目。您也可以使用<span class="uicontrol">过滤器类别</span>框来缩小类别列表范围。</span></li><li purpose="step" id="ESRI_STEP_67FD3A21A75F4B8FA0CFA789302380BE"><span purpose="cmd">单击<span class="uicontrol">发布</span>。</span></li></ol></div><section class="result padded-anchor" id="ESRI_RESULT_3161F2E736024CC0B0DD8288C087F93B" purpose="result"><p id="GUID-45CC6314-E786-4000-A3A4-8B8515E0C8B9" ishcondition="agol_plat=portal">切片已解包，且已在您的门户中创建托管切片图层。您应该在<span class="uicontrol">我的内容</span>中看到该图层。</p></section></section></section></section><section class="section1 padded-anchor" id="ESRI_SECTION1_08DDA29C1F264B398BB618CFFB550A08" purpose="section1"><h2>从服务定义文件发布</h2><p id="GUID-ED955E3A-2978-4312-B0F2-97072C79B326" ishcondition="agol_plat=portal">发布切片和构建缓存会消耗大量的服务器资源。如果需要发布大量切片图层，您的地图创建者可以在 <span class="ph">ArcMap</span> 中创建服务定义 (<span class="usertext">.sd</span>) 文件，定义文件中包含向门户发布切片图层所需的所有信息。然后可以在工作时间后使用脚本向您的门户上传和发布服务定义文件。生成的切片图层在您的门户托管服务器上进行托管。</p><section class="section2 padded-anchor" id="ESRI_SECTION2_B3E45124A2074A2E82C27C8C5DBD3A8E" purpose="section2"><h3>创建服务定义文件</h3><section class="wfsteps padded-anchor" purpose="wfsteps"><h4></h4><section class="context padded-anchor" id="ESRI_CONTEXT_07FED2F84E194EF08390D1DD4E11B1C3" purpose="context"><p id="GUID-DFC66B9A-2BAA-41ED-8BA2-BC2F17FAE0E6"><span class="ph">地图创建者应遵循以下步骤创建包含托管于门户中的切片图层所需的数据和符号系统的服务定义文件。</span></p></section><div class="steps" id="ESRI_STEPS_40BA9BC1BB52405591F3728C284ED82B"><ol class="list-numbered" purpose="ol"><li purpose="step" id="GUID-55942DFB-1F10-4688-BDFD-E4859766BD28" ishcondition="agol_plat=portal"><span purpose="cmd" id="GUID-5B09C0D6-98FF-49A9-98E5-E67C9BA42C17">启动 <span class="ph">ArcMap</span>，然后登录到门户。</span></li><li purpose="step" id="ESRI_STEP_462AE4FFAC3242A58D2F64FFA93EB1B8"><span purpose="cmd" id="GUID-2E50BABD-9BB6-4341-BB91-61C998161863">创建和保存地图。</span><div class="info" purpose="info"><p id="GUID-38F5A5AF-4523-4C98-BFF4-F69CBBB1EB1C">有关创建和发布地图的信息，请参阅 <span class="ph">ArcGIS Server</span> 帮助中的<a class="xref xref" esrisubtype="extrel" hrefpfx="https://desktop.arcgis.com/zh-cn/arcmap/latest/map" href="https://desktop.arcgis.com/zh-cn/arcmap/latest/map/publish-map-services/map-service-planning.htm">地图服务</a>主题。</p></div></li><div class="stepinfo" purpose="stepinfo">现在，创建服务定义文件。</div><li purpose="step" id="ESRI_STEP_FDD6DF8B59EF4B38B9D4B9C6E330250F"><span purpose="cmd" id="GUID-60081A24-498A-4EB3-BE74-49CD59B83701">单击<span class="uicontrol">文件 <span class="greaterthan">&gt;</span> 共享为 <span class="greaterthan">&gt;</span> 服务</span>。</span></li><li purpose="step" id="ESRI_STEP_15EFA6C2A0D347E2A323F46104F52F32"><span purpose="cmd" id="GUID-2B3F5FA1-DCB2-4441-8686-0CF45612F631">选择<span class="uicontrol">保存为服务定义文件</span>，然后单击<span class="uicontrol">下一步</span>。</span></li><li purpose="step" id="ESRI_STEP_07156102ACEF4540BC5EABF2A2628BC0"><span purpose="cmd" id="GUID-0C5932CE-7DD5-463C-92C2-6D1449420D72">单击<span class="uicontrol">选择连接</span>，然后从下拉列表中选择<span class="uicontrol">我的托管服务</span>。</span></li><li purpose="step" id="ESRI_STEP_1774B1D9E121430B961871E7C72A1BD8"><span purpose="cmd" id="GUID-CB1282FC-B647-4E6A-B472-94D8FAFC6E73">输入文件名称并单击<span class="uicontrol">下一步</span>。</span></li><li purpose="step" id="ESRI_STEP_5E1F9774831D4C1785ECF47BB8F8BAEA"><span purpose="cmd" id="GUID-35532A54-6581-401A-A2AB-601A825BE9DA">在您的客户端计算机上指定将在哪个目录中创建服务定义文件，然后单击<span class="uicontrol">继续</span>。</span><div class="stepresult" purpose="stepresult"><p id="GUID-DAB40690-58DA-4CF6-B3DE-8555FBF85D7F">随即打开<span class="uicontrol">服务编辑者</span>。</p></div></li><li purpose="step" id="ESRI_STEP_CA7779E28F2746EAA330B131B96BBCCB"><span purpose="cmd" id="GUID-42A3747B-5D41-47DA-860D-88270A3EDB38"> 在<span class="uicontrol">服务编辑者</span>的左侧窗格中单击<span class="uicontrol">缓存</span>。</span></li><li purpose="step" id="ESRI_STEP_D3E3E5AC23CD4382AFCB9E9FC56F953E"><span purpose="cmd" id="GUID-267DDEA5-6EC4-4829-A0B3-D757EFBDD1E4"> 选择<span class="uicontrol">切片方案</span>。</span></li><li purpose="step" id="ESRI_STEP_C98140A0BF1A45B59298C830B8930BC0"><span purpose="cmd" id="GUID-E08E43C8-D2A4-4CA4-BC5B-E6B9E4F08170">选择切片的最小比例和最大比例，然后选择<span class="uicontrol">计算缓存大小</span>。</span></li><li purpose="step" id="ESRI_STEP_1F92DE5674894A2DBE99DD3950917CEF"><span purpose="cmd" id="GUID-67E4D0F2-AC95-4CD0-9CED-619CBB0E30B9">单击<span class="uicontrol">发布服务后，手动构建缓存</span>。</span></li><li purpose="step" id="ESRI_STEP_F76E6650BF9B407EA5205637FA234093"><span purpose="cmd" id="GUID-2ED8DAE3-589F-4794-8A4D-CE3F0E462B9B">或者，单击<span class="uicontrol">高级设置</span>并为切片缓存设置其他缓存设置。</span></li><li purpose="step" id="ESRI_STEP_F389FFF18409496C90EB31B3D59DCE3B"><span purpose="cmd" id="GUID-111D8F03-B6C1-4175-8E7F-2227ED353C94"> 在<span class="uicontrol">服务编辑者</span>的左侧窗格中，单击<span class="uicontrol">项目描述</span>并提供切片图层的信息。</span><div class="info" purpose="info"><p id="GUID-EDEC4A3E-759F-48CF-9C9C-D43D2157A659">创建服务定义文件前必须提供至少一个摘要和标签。</p></div></li><li purpose="step" id="ESRI_STEP_805D84ACF3DB446398B1B12EEF536BF7"><span purpose="cmd" id="GUID-42B7983E-3ADF-4F0A-86E8-251F62415228">单击<span class="uicontrol">分析</span> <img purpose="img" placement="inline" alt="分析" title="分析" src="GUID-98E22D54-9700-4516-9382-BC63CF8DD4E7-web.png"> 以确保不存在任何错误。</span><div class="info" purpose="info"><p id="GUID-88F7A7F1-A190-4648-B9E8-9D15291A8B6E">您必须修复错误，然后才能过渡服务定义文件。也可以对返回的警告和消息进行修正。</p></div></li><li purpose="step" id="ESRI_STEP_2531D6C326CA446AA630CAFAE880323E"><span purpose="cmd" id="GUID-347DC62E-5CAE-4118-8732-E06D1065C1F2"> 修复错误以及警告和消息（可选）后，单击<span class="uicontrol">过渡</span> <img purpose="img" placement="inline" alt="过渡" title="过渡" src="GUID-C97588E9-9818-41A5-988A-9A5833DCD59F-web.png">。</span></li></ol></div><section class="result padded-anchor" id="ESRI_RESULT_4C63094D9F2B4C1E871087AB6EFD1C6E" purpose="result"><p id="GUID-5E129F2F-610A-4B11-A822-CD11F07D19D7">服务定义文件保存在您指定的位置。</p></section></section></section><section class="section2 padded-anchor" id="ESRI_SECTION2_C3F7E80A9A73484FA6B60A74B1EB0B97" purpose="section2"><h3>加载服务定义并发布</h3><p id="GUID-8612213E-0003-437D-B2EA-8F66D1C16B26">从创建者处获取服务定义文件后，可将其手动上传到您门户中并发布切片图层，或者计划使用脚本来上传和发布该文件。</p><section class="section3 padded-anchor" id="ESRI_SECTION3_8FD8D99B341B4811A5B734BDCDD5295D" purpose="section3"><h4>手动上传和发布</h4><p id="GUID-03F9C670-D82B-4FF5-B303-F9772A016A53">登录到门户网站来向您的门户添加和发布服务定义文件。</p><section class="wfsteps padded-anchor" purpose="wfsteps"><h4></h4><div class="steps" id="ESRI_STEPS_BA69D82F7E594BD8BCA38C57CCA832AF"><ol class="list-numbered" purpose="ol"><li purpose="step" id="ESRI_STEP_BC334B1A5E9643EC9D5FC254630EE5A1"><span purpose="cmd" id="GUID-161CD771-3EFD-4E1B-BFAC-29DE5CBD15CF">以具有创建内容和发布托管切片图层权限的成员身份登录到您的门户，然后单击<span class="uicontrol">内容 <span class="greaterthan">&gt;</span> 我的内容</span>。</span></li><li purpose="step" id="ESRI_STEP_E16169B6172A4349AE954B10F79E5651"><span purpose="cmd" id="GUID-E439C45A-8396-4D00-9B65-03925F91A59C">单击<span class="uicontrol">添加项目</span>。</span></li><li purpose="step" id="ESRI_STEP_1CAEE17328E448C4AE02B235A115B3FE"><span purpose="cmd" id="GUID-221C34BD-9BF1-4F4E-851D-1003963B2B86">选择从您的计算机加载文件。</span></li><li purpose="step" id="ESRI_STEP_4544E1F28BB3498C9572B93A0831F648"><span purpose="cmd" id="GUID-359ABDD9-ECB1-49FF-A8EA-5F5D7755DE12">单击“浏览”按钮，然后选择服务定义文件。</span></li><li purpose="step" id="ESRI_STEP_4A57EBDD63C940C08B1F338624B5C193"><span purpose="cmd" id="GUID-82F42C51-0AA3-4693-A04F-11D01A9E1047">选中<span class="uicontrol">将文件发布为服务</span>。</span></li><li purpose="step" id="ESRI_STEP_6C052A18D5664A4582E607A8EEE64820" ishcondition="agol_plat=portal"><span purpose="cmd">如果门户管理员已配置内容类别，请单击<span class="uicontrol">分配类别</span>，然后最多选择 20 个类别以方便其他用户查找您的项目。您也可以使用<span class="uicontrol">过滤器类别</span>框来缩小类别列表范围。</span></li><li purpose="step" id="ESRI_STEP_DB3D2B2E2368430AB6CFC6D54F9184B5"><span purpose="cmd" id="GUID-238D0EDB-62B7-4BC1-BE14-647E742FB60C">输入标签术语，并以逗号分隔。</span><div class="info" purpose="info"><p id="GUID-C8B93B4D-5E9C-4CE1-B9F0-63760D5B0B58">标签是用于描述项目的词语或短语，可提高项目被找到的几率。<span class="usertext">Federal land</span>将被视为一个标签，而
<span class="usertext">Federal,land</span>则被视为两个标签。</p></div></li><li purpose="step" id="ESRI_STEP_842C38C8AC004D27A504D4700A196812"><span purpose="cmd" id="GUID-7D03605C-DECF-470A-B4EB-3969118E3762">单击<span class="uicontrol">添加项目</span>添加服务定义文件并发布切片图层。</span><div class="info" purpose="info"><p id="GUID-3A5E4BF3-C18C-4EBC-9DC9-98D6FB635EB5">切片图层发布到您的门户托管服务器，而且服务定义和切片都添加到<span class="uicontrol">我的内容</span>中。</p></div></li><li purpose="step" id="ESRI_STEP_EB2FA6BFAA3E44789D05D3AC2D1DE0C3"><span purpose="cmd" id="GUID-1548FBC4-2D62-473E-9F1C-705039233ACD">切片图层发布完成后，您可选择<span class="uicontrol">开始构建切片</span>。单击链接创建切片。</span></li></ol></div><section class="postreq padded-anchor" id="ESRI_POSTREQ_232AED0396594FC189CEAD809D2D78F4" purpose="postreq"><p id="GUID-776941BE-B2EC-4E45-B831-8BD166EF5A78">默认情况下，只有您有权访问服务定义文件和托管切片图层。您可以在您的组织或指定群组中与他人共享文件和切片。</p></section></section></section><section class="section3 padded-anchor" id="ESRI_SECTION3_98F0B2F863CA4270AE6ABA0983F4BFE4" purpose="section3"><h4>运行脚本来上传和发布</h4><p id="GUID-3575786B-9605-4FBB-AA2A-EF90A9484788">要在几小时后上传并发布服务定义文件，可自动执行以下脚本以在您的 <span class="ph">GIS Server</span> 计算机上运行它们： </p><section class="wfsteps padded-anchor" purpose="wfsteps"><h4></h4><div class="steps" id="ESRI_STEPS_6A4180B89DC94C8A98641537DB6210D6"><ol class="list-numbered" purpose="ol"><li purpose="step" id="ESRI_STEP_0A48C05BA8CD4A0FA009CC7602ABC3A2"><span purpose="cmd" id="GUID-120661D7-DC67-411B-AB2E-B1A1D4966431">将以下脚本复制到文本文件并通过 <span class="usertext">.py</span> 扩展名保存文件。</span><div class="stepexample" purpose="stepexample"><p id="GUID-67CFF029-A238-4AF1-87B8-895041ADD9DD"><section class="codeblock padded-anchor" purpose="codeblock"><div class="codeblockbody"><pre><code class="python">import os, sys, json, urllib, urllib2, httplib, urlparse, mimetools, mimetypes
from cStringIO import StringIO

# generates a new token from Portal
def generate_token(baseurl, username, password):
    tokenUrl = urlparse.urljoin(baseurl, 'sharing/generateToken')
    postdata = { 'username': username, 'password': password,
               'client': 'requestip', 'expiration': 60, 'f': 'json' }
    encoded_postdata = urllib.urlencode(postdata)
    opener = urllib2.build_opener()
    try: resp = opener.open(tokenUrl, data=encoded_postdata)
    except urllib2.HTTPError as e: raise Exception('Unable to connect to Portal, please check the url: {} {}'.format(e.code, e.reason))
    resp_json = json.loads(resp.read())
    if 'error' in resp_json: raise Exception('\n'.join(resp_json['error']['details']))
    return resp_json['token']
    sys.exit(1)

# create proper multi-part POST request data
def _encode_multipart_formdata(fields, files):
    boundary = mimetools.choose_boundary()
    buf = StringIO()
    for (key, value) in fields.iteritems():
        buf.write('--%s\r\n' % boundary)
        buf.write('Content-Disposition: form-data; name=&quot;%s&quot;' % key)
        buf.write('\r\n\r\n%s\r\n' % str(value))
    for (key, filepath, filename) in files:
        buf.write('--%s\r\n' % boundary)
        buf.write('Content-Disposition: form-data; name=&quot;%s&quot;; filename=&quot;%s&quot;\r\n' % (key, filename))
        buf.write('Content-Type: %s\r\n' % (mimetypes.guess_type(filename)[0] or 'application/octet-stream'))
        f = open(filepath, &quot;rb&quot;)
        try:
            buf.write('\r\n' + f.read() + '\r\n')
        finally:
            f.close()
    buf.write('--' + boundary + '--\r\n\r\n')
    buf = buf.getvalue()
    return boundary, buf

# send multi-part POST request
def _postmultipart(host, selector, fields, files, ssl):
    boundary, body = _encode_multipart_formdata(fields, files)
    headers = { 'Content-Type': 'multipart/form-data; boundary={0}'.format(boundary) }
    if ssl: h = httplib.HTTPSConnection(host)
    else: h = httplib.HTTPConnection(host)
    
    h.request('POST', selector, body, headers)
    resp = h.getresponse()

    return resp.read()

# first upload the SD file and create an item in Portal
def addSDItem(baseurl, user, token, title, file, folder = ''):
    addUrl = 'sharing/rest/content/users/{}/{}addItem'
    if folder != '': addUrl = addUrl.format(user, folder + '/')
    else: addUrl = addUrl.format(user, '')
    
    url = urlparse.urljoin(baseurl, addUrl)

    files = [('file', file, os.path.split(file)[1])]
    fields = { 'token' : token, 'f' : 'json', 'type' : 'Service Definition', 'title' : title, 
               'tags' : 'sampletag', 'name': title, 'typeKeywords' : 'Data, Service Definition, ArcGIS, sd' }

    ssl = url.startswith('https://')
    
    parsed_url = urlparse.urlparse(url)
    
    print('Uploading {} to {}..'.format(file, baseurl))
    resp = _postmultipart(parsed_url.netloc, str(parsed_url.path), fields, files, ssl)
    resp_json = json.loads(resp)

    if 'error' in resp_json:
      raise Exception('Unable to upload file {}: {}'.format(file, resp_json['error']['message']))
    
    return resp_json['id']
    
# second publish the uploaded SD item as a new tiled service
def publishTiles(baseurl, user, token, itemid):
    publishUrl = urlparse.urljoin(baseurl, 'sharing/rest/content/users/{}/publish'.format(user))
    query_dict= { 'f' : 'json', 'token': token, 'itemid': itemid, 'buildInitialCache' : True,
                  'publishParameters' : { 'name' : 'cities' }, 'fileType': 'serviceDefinition' }
                  
    query_string = urllib.urlencode(query_dict)
    print('Publishing tile service from item..')
    response = urllib.urlopen(publishUrl, query_string)
        
    resp_json = json.loads(response.read())
    
    if 'error' in resp_json: raise Exception('Unable to publish item: {}'.format(resp_json['error']['message']))

# read input from command line when run as a standalone script
if __name__ == '__main__':
    try: 
      url = sys.argv[1]
      user = sys.argv[2]
      password = sys.argv[3]
      f = sys.argv[4]
      title = sys.argv[5]
      if not url.endswith('/'): url += '/' # make sure the url ends with /
    except: # if too few parameters are passed on command line, show usage help
      print('Usage: ')
      print('       publishServiceItem.py [portalUrl] [userName] [password] [sdFilePath] [titleOfServiceItem]')
      print('')
      print('portalUrl           The secure url to the portal, e.g. https://portalmachine.example.com/arcgis/')
      print('userName            The username of a user to publish the service.')
      print('                    This user must have the required publishing privileges.')
      print('password            The password of the user')
      print('sdFilePath          Path to the .sd file containing the service definition')
      print('                    E.g. c:\\temp\cachedService.sd')
      print('titleOfServiceItem  The title to assign to the published item in the portal.')
      sys.exit(1)  

    token = generate_token(url, user, password)

    id = addSDItem(url, user, token, title, f)
    publishTiles(url, user, token, id)
    print('Publishing complete. Tile generation has been started and may take a while to finish.')</code></pre></div></section></p></div></li><li purpose="step" id="ESRI_STEP_3C424F39E50740D39534D64C3634F29A"><span purpose="cmd" id="GUID-E879FCC3-0F8F-4D5B-AC0A-73B7ABF56104">创建您计划用来运行 Python 脚本的批量文件或 shell 脚本。</span></li><li purpose="step" id="ESRI_STEP_53B2A5240C82475DB0F4B83D80FA68E0"><span purpose="cmd" id="GUID-58DB44A9-510B-426E-9409-AF7B70886231">在文件中，调用 Python 脚本并提供针对您的站点的选项。</span><div class="stepexample" purpose="stepexample"><p id="GUID-E4CBB4B4-66F0-49EC-8C43-7385FA52C811">例如，要运行 <span class="usertext">publishServiceItem.py</span> 脚本，在您的门户内键入 URL、连接使用的用户名、用户密码、服务定义文件的路径和创建服务的标题。在这个示例中，门户 URL 为 <span class="usertext">https://portal.domain.com/arcgis/</span>，用户名和密码为 pub1 和 pub.1，服务定义文件的路径为 <span class="usertext">C:\maps\SDs\mymap.sd</span>，服务名称为 studytiles。<section class="codeblock padded-anchor" purpose="codeblock"><div class="codeblockbody"><pre><code class="other no-highlight">publishServiceItem.py https://portal.domain.com/arcgis/ pub1 pub.1 C:\maps\SDs\mymap.sd studytiles</code></pre></div></section></p></div></li><li purpose="step" id="ESRI_STEP_5F3DC75BAD764287B9E7F4D77D511BFB"><span purpose="cmd" id="GUID-3070133B-ACAE-461B-8EE9-AD204A2A9032">在您的门户内存最低时，计划要运行的脚本。</span><div class="info" purpose="info"><p id="GUID-0BB287B2-63F9-4ED2-8E7C-2DE7B0BAC0E9">请参阅 ArcGIS 地理处理帮助中的<a class="xref xref" esrisubtype="extrel" hrefpfx="https://desktop.arcgis.com/zh-cn/arcmap/latest/analyze" href="https://desktop.arcgis.com/zh-cn/arcmap/latest/analyze/executing-tools/scheduling-a-python-script-to-run-at-prescribed-times.htm">将 Python 脚本计划为在预定时间运行</a>以获取更多有关计划脚本的详细信息。</p></div></li></ol></div></section></section></section></section>
			
				<hr>
				<!--googleoff: all-->
				
	
        
		    <p class="feedback right">
		        <a id="afb" class="icon-ui-contact" href="/feedback/" data-langlabel="feedback-on-this-topic" >有关此主题的反馈?</a>
		    </p>
        
	

				<!--googleon: all-->
			
		</main>
	</div>
	
	<!--googleoff: all-->
	
		
			<div id="main-toc-large" class="column-5">
			    <div class="panel font-size--2 tablet-hide trailer-1">
			      <h5 class="trailer-half">在本主题中</h5>
			      <ol class="list-plain pre-0 trailer-0"><li><a href="#ESRI_SECTION1_F68FCBD33BD54117B23232D41A762E89">从托管要素图层发布</a></li><li><a href="#ESRI_SECTION1_8E904AC4E5994E0EA75384062A8D6BF5">在 <ph translate="no" varid="arcgis_professional_xi">ArcGIS Pro</ph> 中定义并发布地图</a></li><li><a href="#ESRI_SECTION1_9DDC0AFDD2AD4AF59CD36A29721AB67A">在 <ph translate="no" varid="arcgis_professional_xi">ArcGIS Pro</ph> 中构建切片包，然后将其上传到您的组织</a></li><li><a href="#ESRI_SECTION1_A2E4F9EB87454D84B66788D7D4C027EC">在 <ph varid="ArcMap_app">ArcMap</ph> 中定义并发布地图</a></li><li><a href="#GUID-C467C9D7-443D-48D6-90AB-8204E3B9FD83">在 <ph varid="ArcMap_app">ArcMap</ph> 中构建并共享切片包，然后发布</a></li><li><a href="#ESRI_SECTION1_08DDA29C1F264B398BB618CFFB550A08">从服务定义文件发布</a></li></ol>
			    </div>
			    
			    
	  		</div>
		
    
   <!--googleon: all-->




          
        </div>
        <!-- ENDPAGECONTENT -->

      </div>

    </div>  <!-- End of wrapper -->

  <footer class="footer leader-3 link-dark-gray" role="contentinfo">
    <div class="grid-container">
      <div class="row">
        <nav class="column-6">
          <h6 data-langlabel="arcgis-for-server">Arc<span>GIS Enterprise</span></h6>
          <ul class="list-plain">
            <li><a data-langlabel="home" href="../../../../zh-CN/">主页</a></li>
            <li><a data-langlabel="portal" href="../../../../zh-CN/portal/">Portal</a></li>
            <li><a data-langlabel="server" href="../../../../zh-CN/server/">Server</a></li>
            <li><a data-langlabel="data-store" href="../../../../zh-CN/data-store/">Data Stores</a></li>
            <li><a data-langlabel="cloud" href="../../../../zh-CN/cloud/">云</a></li>
            <li><a data-langlabel="apps" href="../../../../zh-CN/apps/">应用程序</a></li>
            <li><a data-langlabel="documentation" href="../../../../zh-CN/documentation/">文档</a></li>
          </ul>
        </nav>

        
  <nav class="column-6">
    <h6 data-langlabel="arcgis-platform">ArcGIS 平台</h6>
    <ul class="list-plain">
      <li><a data-langlabel="arcgis" href="//www.arcgis.com/">ArcGIS Online</a></li>
      <li><a data-langlabel="arcgis-for-professionals" href="//pro.arcgis.com/">ArcGIS Pro</a></li>
      <li><a data-langlabel="arcgis-for-server" href="//enterprise.arcgis.com/">ArcGIS Enterprise</a></li>
      <li><a data-langlabel="arcgis-for-developers" href="https://developers.arcgis.com/">ArcGIS for Developers</a></li>
      <li><a data-langlabel="arcgis-solutions" href="//solutions.arcgis.com/">ArcGIS Solutions</a></li>
      <li><a data-langlabel="arcgis-marketplace" href="//marketplace.arcgis.com/">ArcGIS Marketplace</a></li>
    </ul>
  </nav>

  <nav class="column-6">
    <h6 data-langlabel="about-esri">关于 Esri</h6>
    <ul class="list-plain">
      <li><a data-langlabel="about-us" href="//www.esri.com/about-esri/">关于我们</a></li>
      <li><a data-langlabel="careers" href="//www.esri.com/careers/">招贤纳士</a></li>
      <li><a data-langlabel="insiders-blog" href="https://www.esri.com/about/newsroom/blog/">Esri 博客</a></li>
      <li><a data-langlabel="user-conference" href="//www.esri.com/events/user-conference/index.html">用户大会</a></li>
      <li><a data-langlabel="developer-summit" href="//www.esri.com/events/devsummit/index.html">开发者峰会</a></li>
    </ul>
  </nav>

  <nav class="column-6">
    <a class="esri-logo" href="//www.esri.com/" aria-label="Esri Home"></a>
    <section class="footer-social-nav leader-1">
            <a class="icon-social-twitter" aria-label="Esri on Twitter" href="https://twitter.com/Esri/"></a>
            <a class="icon-social-facebook" aria-label="Esri on Facebook" href="https://www.facebook.com/esrigis/"></a>
            <a class="icon-social-github" aria-label="Esri on GitHub" href="//esri.github.io/"></a>
            <a class="icon-social-contact" aria-label="Contact Esri" href="//www.esri.com/about-esri/contact/"></a>
    </section>
	  
  </nav>
  
  <div class="column-24 leader-1">
    <p class="font-size--3"><a href="http://www.esri.com/legal/copyright-trademarks">Copyright &copy; 2019 Esri.</a> All rights reserved. | <a href="http://www.esri.com/legal/privacy/">隐私政策</a> | <a href="http://www.esri.com/legal/software-license">法律声明</a></p>
  </div>
  


      </div>
    </div>
  </footer>
  <!--googleoff: all-->

  
  
	<script src="../../../../zh-CN/assets/js/init.js" type="text/javascript"></script>
	<!--<script src="../../../../zh-CN/assets/js/drop-down.js" type="text/javascript"></script>-->
	<script src="../../../../zh-CN/assets/js/search/searchform.js" type="text/javascript"></script>
	<script src="../../../../zh-CN/cdn/js/link-modifier.js" type="text/javascript"></script>
	<script src="../../../../zh-CN/cdn/js/sitewide.js" type="text/javascript"></script>
	<script src="../../../../zh-CN/cdn/js/libs/highlight.pack.js" type="text/javascript"></script>
	<script>hljs.initHighlightingOnLoad();</script>


  
    

  <script src="../../../../zh-CN/cdn/js/affix.js" type="text/javascript"></script>
  <script type="text/javascript">
    $(function () {
          var appendFlg = true;

          $("#bigmac")
          .on("affixed.bs.affix", function (evt) {
            if (appendFlg) {
              $("<a class='crumb' href='#'>发布托管切片图层</a>").insertAfter ($("#bigmac nav a").last());
              appendFlg = false;
            }
          })
          .on ("affix-top.bs.affix", function(evt) {
            if (!appendFlg) {
              $("#bigmac nav a").last().remove();
            }
            appendFlg = true;
          })
    })
  </script>
  
        <script type="text/javascript">
          window.doctoc = {
            pubID: "583",
            tpcID: "198",
            
              prefix: "使用",
              prefixUrl: "/zh-cn/portal/latest/use/",
          
            hideToc: false
          }
        </script>

        <script type="text/javascript" src="../../../../zh-CN/portal/latest/use/583.js" ></script>
        <script type="text/javascript" src="../../../../zh-CN/cdn/calcite/js/protoc.js" ></script>
        
        

  <noscript>
        <p>
            <a href="flisting.htm">flist</a>
        </p>
    </noscript>
    <script type="text/javascript"></script>
  
  
    
    

  </body>
</html>