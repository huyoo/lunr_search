

<!DOCTYPE html>
<!--[if lt IE 7]>  <html class="ie lt-ie9 lt-ie8 lt-ie7 ie6" dir="ltr"> <![endif]-->
<!--[if IE 7]>     <html class="ie lt-ie9 lt-ie8 ie7" dir="ltr"> <![endif]-->
<!--[if IE 8]>     <html class="ie lt-ie9 ie8" dir="ltr"> <![endif]-->
<!--[if IE 9]>     <html class="ie ie9" dir="ltr"> <![endif]-->
<!--[if !IE]><!--> <html dir="ltr" lang="zh-CN"> <!--<![endif]-->
<head>
    <meta charset="utf-8">
    <title>在 Web 应用程序中使用地理处理任务&mdash;文档 | ArcGIS Enterprise 文档</title>
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">

    <script>
      var docConfig = {
        locale: 'zh-CN'
        ,localedir: 'zh-cn'
        ,langSelector: ''
        
        ,relativeUrl: false
        

        ,searchformUrl: '/search/'
        ,tertiaryNavIndex: ''

        
      };
    </script>
	 


    
    <!--[if lt IE 9]>
      <script src="../../../../../zh-CN/cdn/js/libs/html5shiv.js" type="text/javascript"></script>
      <script src="../../../../../zh-CN/cdn/js/libs/selectivizr-min.js" type="text/javascript"></script>
      <script src="../../../../../zh-CN/cdn/js/libs/json2.js" type="text/javascript"></script>
      <script src="../../../../../zh-CN/cdn/js/libs/html5shiv-printshiv.js" type="text/javascript" >

    <![endif]-->

     <!--[if lt IE 11]>
    <script>
      $$(document).ready(function(){
        $$(".hideOnIE").hide();
      });
    </script>
    <![endif]-->
	<meta name="viewport" content="width=device-width, user-scalable=no">
	<link href="../../../../../zh-CN/assets/img/favicon.ico" rel="shortcut icon" >
	<link href="../../../../../zh-CN/assets/css/screen.css" media="screen" rel="stylesheet" type="text/css" />
	<link href="../../../../../zh-CN/cdn/calcite/css/documentation.css" media="screen" rel="stylesheet" type="text/css" />
	<link href="../../../../../zh-CN/assets/css/print.css" media="print" type="text/css" rel="stylesheet" />

	<!--
	<link href="../../../../../zh-CN/assets/css/screen_l10n.css" media="screen" rel="stylesheet" type="text/css" />
	<link href="../../../../../zh-CN/assets/css/documentation/base_l10n.css" media="screen" rel="stylesheet" type="text/css" />
	<link href="../../../../../zh-CN/assets/css/print_l10n.css" media="print" type="text/css" rel="stylesheet" />
	-->
	
	
		<script src="../../../../../zh-CN/cdn/js/libs/jquery.1.9.1.min.js" type="text/javascript"></script>
	
	<script src="../../../../../zh-CN/cdn/js/libs/jquery.cookie.js" type="text/javascript"></script>
	<link href="../../../../../zh-CN/cdn/css/colorbox.css" media="screen" rel="stylesheet" type="text/css" />
	<link href="../../../../../zh-CN/cdn/css/colorbox_l10n.css" media="screen" rel="stylesheet" type="text/css" />
	<script src="../../../../../zh-CN/cdn/js/libs/jquery.colorbox-min.js" type="text/javascript"></script>
	<script src="../../../../../zh-CN/assets/js/video-init.js" type="text/javascript"></script>
	<script src="../../../../../zh-CN/assets/js/sitecfg.js" type="text/javascript"></script>
	
		<script src="../../../../../zh-CN/assets/js/signIn.js" type="text/javascript"></script>
	

	<!--- Language Picker -->
	<script src="../../../../../zh-CN/assets/js/locale/l10NStrings.js" type="text/javascript"></script>
	
		 
	

	<script src="../../../../../zh-CN/assets/js/calcite-web.js" type="text/javascript"></script>



  <!--- search MD -->
    <META name="description" content="您可以将地理处理任务与 ArcGIS API for JavaScript 配合使用，并为您的 Web 应用程序添加地理处理功能。"><META name="last-modified" content="2019-12-6"><META name="product" content="arcgis-server-windows,arcgis-enterprise-windows"><META name="sub_category" content="ArcGIS Server (Windows)"><META name="search-collection" content="help"><META name="content_type_label" content="帮助主题"><META name="sub_category_label" content="ArcGIS Server (Windows)"><META name="search-category" content="help-general"><META name="subject_label" content="服务"><META name="version" content="10.8"><META name="content_type" content="Help Topic"><META name="subject" content="SERVICES"><META name="content-language" content="zh-cn">
    <!--- search MD -->

  
  <script src="../../../../../zh-CN/assets/js/switchers/server-1.js" type="text/javascript"></script>
  
      

</head>

<!--
      pub: GUID-F157DF68-7F60-4427-A561-AD2F0FA30861=22
      tpc: GUID-778D3480-C438-46B0-8EF1-3FFA42BC01E8=4
      -->


<!-- variable declaration, if any -->
<!-- can change following macro to set variable once we are on Jinja 2.8 -->





<body class="claro zh-CN server">
  

  <!-- Drawer location -->
  <div class="drawer drawer-left js-drawer" data-drawer="top-nav">
        <nav class="drawer-nav" role="navigation">
          <aside class="side-nav">
            <h2 class="side-nav-title">Arc<span>GIS</span> Enterprise</h2>
            <form id="helpSearchForm" class="margin-left-half margin-right-half leader-half trailer-half drawer-search-form" method="GET">
              <input type="search" name="q"  placeholder="搜索 ArcGIS Server 10.8 帮助">
              <input type="hidden" name="collection" value="help" />
              <input type="hidden" name="product" value="arcgis-server-windows" />
              <input type="hidden" name="version" value="10.8" />
              <input type="hidden" name="language" value="zh-CN" />
            </form>    
             <a id="nav-portal" data-langlabel="portal" href="../../../../../zh-CN/portal/" class="side-nav-link">Portal</a>
             
            <a id="all-servers" data-langlabel="all-servers" href="../../../../../zh-CN/server/" class="side-nav-link">所有服务器</a>
            <a id="gis-server" data-langlabel="gis-server" href="../../../../../zh-CN/server/" class="side-nav-link">GIS Server</a>
            <a id="image-server" data-langlabel="image-server" href="../../../../../zh-CN/image/" class="side-nav-link">Image Server</a>
            <a id="geo-analytics-server" data-langlabel="geo-analytics-server" href="../../../../../zh-CN/geoanalytics/" class="side-nav-link">GeoAnalytics Server</a>
            <a id="geoevent-server" data-langlabel="geoevent-server" href="../../../../../zh-CN/geoevent/" class="side-nav-link">GeoEvent Server</a>
            <a id="notebook-server" data-langlabel="notebook-server" href="../../../../../zh-CN/notebook/" class="side-nav-link">Notebook Server</a>
            <a id="nav-data-store" data-langlabel="data-store" href="../../../../../zh-CN/data-store/" class="side-nav-link">Data Stores</a>
            <a id="nav-cloud" data-langlabel="cloud" href="../../../../../zh-CN/cloud/" class="side-nav-link">云</a>
            <a id="nav-apps" data-langlabel="apps" href="../../../../../zh-CN/apps/" class="side-nav-link">应用程序</a>
            <a id="nav-doc" data-langlabel="documentation" href="../../../../../zh-CN/documentation/" class="side-nav-link">文档</a>

          </aside>
        </nav>
    </div>

    <!-- user navigation collapses to drawer on mobile -->
    
    <div class="drawer drawer-right js-drawer hide-if-logged-out logged-in-navigation" data-drawer="user-nav">
      <nav class="drawer-nav">
        <aside class="side-nav">
          <a class="side-nav-link agolProfile" href="#">我的个人资料</a>
          <a class="side-nav-link icon-ui-sign-out js-log-out" href="#">登出</a>
        </aside>
      </nav>
    </div>
    
<!-- End of drawer -->

  
  <div class="wrapper">
      <!--googleoff: all-->

      <header class="top-nav" data-skin="learn">
        <a class="skip-to-content" href="#skip-to-content">Skip To Content</a>
        <div class="grid-container">
          <div class="column-24">


            <!--<div class="top-nav-title-wrapper text-center ">-->
              <a href='../../../../../zh-CN/' class="top-nav-title tablet-hide"><span>Arc</span>GIS  Enterprise</a>
              <a href='../../../../../zh-CN/' class="icon-ui-menu top-nav-title js-drawer-toggle tablet-show" data-drawer="top-nav"><span>Arc</span>GIS Enterprise</a>
            <!--</div> -->

          
            <nav role="navigation" class="top-nav-list left tablet-hide">
              <a id="nav-portal" data-langlabel="portal" href="../../../../../zh-CN/portal/" class="top-nav-link">Portal</a>

                <div class="dropdown js-dropdown ">
                  <a class="top-nav-link js-dropdown-toggle" tabindex="0" aria-haspopup="true" aria-expanded="false" href="#">Servers</a>
                  <nav class="dropdown-menu featured" role="menu">
                    <ul class="dropdown-sublist-featured">
                      <li class="dropdown-subitem-featured">
                        <a href="../../../../../zh-CN/get-started/latest/windows/additional-server-deployment.htm" class="sublink-featured">
                          <span><svg class="sublink-image" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><path  d="M42.92 6.1H4.12v8.566l.833.832-.835.833-.018 7.332.845.847-.825.824V33.9h25v5.2h-2v1.075H8.02v.8h19.1v.925h4.8v-.925H40v-.8h-8.08V39.1h-2v-5.2h13v-8.566l-.834-.834.835-.834v-7.332l-.835-.834.835-.834zm-11.8 35h-3.2v-1.2h3.2zm11-8H4.92v-7.434l.767-.766h35.668l.765.766zm0-9.766l-.766.766H5.666l-.766-.767.017-6.669.766-.764h35.671l.766.766zm0-9l-.766.766H5.687l-.766-.766V6.9h37.2zM19 11.9h-2v-.8h2zm-4 0h-2v-.8h2zm-4 0H9v-.8h2zm6 8.2h2v.8h-2zm-4 0h2v.8h-2zm-4 0h2v.8H9zm8 9h2v.8h-2zm-4 0h2v.8h-2zm-4 0h2v.8H9z"/></svg></span>
                          <span class="sublink-text">所有服务器</span>
                        </a>
                      </li>
                      <li class="dropdown-subitem-featured">
                        <a href="../../../../../zh-CN/server/" class="sublink-featured">
                          <span><svg class="sublink-image" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><path d="M45.98 33.575a.616.616 0 0 0-.335-.51l-3.362-2.03 3.362-2.031a.556.556 0 0 0 0-1.02l-11.1-6.704a1.293 1.293 0 0 0-1.112 0L22.33 27.982a.556.556 0 0 0 0 1.02l3.36 2.03-3.358 2.03a.556.556 0 0 0-.002 1.021l3.322 2.006-3.324 2.008a.555.555 0 0 0 .002 1.017l11.102 6.703a1.25 1.25 0 0 0 1.11.002l11.104-6.706a.556.556 0 0 0 0-1.02l-3.32-2.006 3.318-2.004a.607.607 0 0 0 .335-.509zM33.837 21.97c.026-.01.286-.005.29-.005l10.814 6.53-10.8 6.523c-.028.01-.284.005-.294.006l-10.813-6.53zm11.105 16.636l-10.8 6.523a2.564 2.564 0 0 1-.295.006l-10.81-6.529 3.39-2.047 7.004 4.23a1.083 1.083 0 0 0 .557.131 1.101 1.101 0 0 0 .554-.13l7.01-4.233zM34.14 40.098a2.545 2.545 0 0 1-.294.006l-10.812-6.53 3.43-2.073 6.97 4.208a1.25 1.25 0 0 0 1.107-.001l6.966-4.206 3.431 2.073zM9 8H7V7h2zm8 8h-2v-1h2zm-4-8h-2V7h2zm4 0h-2V7h2zm-4 8h-2v-1h2zm7.316 11.1H3.9v-6.434l.766-.766h35.668l.766.766v2.12l.8.483v-2.935l-.826-.826.826-.845v-6.329l-.834-.834.834-.834V3.1H3.1v7.566l.834.834-.834.834v6.332l.834.834-.834.834V27.9h16.88a2.632 2.632 0 0 1 .336-.8zM3.9 10.334V3.9h37.2v6.434l-.766.766H4.666zm0 8v-5.668l.766-.766h35.668l.766.766v5.67l-.746.764H4.666zM15 24v-1h2v1zm-4 0v-1h2v1zm-2-8H7v-1h2zm-2 8v-1h2v1z"/></svg></span>
                          <span class="sublink-text">GIS Server</span>
                        </a>
                      </li>
                      <li class="dropdown-subitem-featured">
                        <a href="../../../../../zh-CN/image/" class="sublink-featured">
                          <span><svg class="sublink-image" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><path d="M17 8h-2V7h2zm-4-1h-2v1h2zm0 8h-2v1h2zM9 7H7v1h2zm8 8h-2v1h2zm-8 0H7v1h2zm4 9v-1h-2v1zm-4 0v-1H7v1zm8 0v-1h-2v1zm4 3.9H3.1v-7.566l.834-.834-.834-.834v-6.332l.834-.834-.834-.834V3.1h38.8v7.566l-.834.834.834.834v6.33l-.826.844.826.826V21h-.8v-.334l-.766-.766H4.666l-.766.766V27.1H21zM4.666 11.1h35.668l.766-.766V3.9H3.9v6.434zm0 8h35.688l.746-.763v-5.671l-.766-.766H4.666l-.766.766v5.668zm40.234 4v21.8H23.1V23.1zm-.8 16.366L39.466 44.1h2.868l1.766-1.766zm-20.2-9.932l5.634-5.634h-2.868L23.9 26.666zm6.2-5.068L24.466 30.1h2.868l2.766-2.766zM28.466 30.1H30.1v-1.634zm2.434 0h6.2v-6.2h-6.2zm-7 7h6.2v-6.2h-6.2zm7 0h6.2v-6.2h-6.2zm0 6.434l5.634-5.634h-2.868L30.9 40.666zm7-7l5.634-5.634h-2.868L37.9 33.666zm1.634-5.634H37.9v1.634zm-8.634 7v1.634l1.634-1.634zm.566 6.2h2.868l2.766-2.766v-2.868zm6.434-3.566l2.634-2.634H37.9zM35.466 44.1H37.1v-1.634zm2.434 0h.434l5.766-5.766V37.9h-2.434L37.9 41.666zm6.2-8.634L42.466 37.1H44.1zm0-4L38.466 37.1h2.868l2.766-2.766zm0-7.566h-6.2v6.2h6.2zm-20.2 0v1.634l1.634-1.634zm0 20.2h6.2v-6.2h-6.2zm20.2 0v-.634l-.634.634z"/></svg></span>
                          <span class="sublink-text">Image Server</span>
                        </a>
                      </li>
                      <li class="dropdown-subitem-featured">
                        <a href="../../../../../zh-CN/geoanalytics/" class="sublink-featured">
                          <span><svg class="sublink-image" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><path d="M17 16h-2v-1h2zm-8 8v-1H7v1zm8 0v-1h-2v1zM13 7h-2v1h2zm4 0h-2v1h2zM9 7H7v1h2zm21.45 20.9H3.1v-7.566l.834-.834-.834-.834v-6.332l.834-.834-.834-.834V3.1h38.8v7.566l-.834.834.834.834v6.33l-.826.844.826.826V27.9h-1.464l-.801-.8H41.1v-6.434l-.766-.766H4.666l-.766.766V27.1h27.15zM4.666 11.1h35.668l.766-.766V3.9H3.9v6.434zm0 8h35.688l.746-.763v-5.671l-.766-.766H4.666l-.766.766v5.668zM13 24v-1h-2v1zm0-9h-2v1h2zm-4 0H7v1h2zm26.672 27.148A1.87 1.87 0 0 1 35.9 43a1.91 1.91 0 1 1-3.763-.222l-9.845-3.414A1.88 1.88 0 0 1 21 39.9a1.9 1.9 0 1 1 1.474-3.084l4.692-2.346A1.878 1.878 0 0 1 27.1 34a1.902 1.902 0 0 1 1.9-1.9 1.867 1.867 0 0 1 .781.191l3.788-5.05A1.88 1.88 0 0 1 33.1 26a1.9 1.9 0 1 1 3.491 1.026l4.889 4.888c-.069.056-.144.1-.21.162a3.986 3.986 0 0 0-.358.402l-4.883-4.883A1.889 1.889 0 0 1 35 27.9a1.867 1.867 0 0 1-.781-.191l-3.788 5.049a1.868 1.868 0 0 1 .437.965l9.204.614c-.018.11-.049.218-.058.33A3.93 3.93 0 0 0 40 35c0 .046.01.09.01.135l-9.185-.612A1.913 1.913 0 0 1 29 35.9a1.889 1.889 0 0 1-1.474-.716l-4.692 2.346a1.878 1.878 0 0 1 .066.47 1.9 1.9 0 0 1-.105.625c-.007.02-.022.036-.03.056l9.63 3.34a1.87 1.87 0 0 1 2.786-.505l5.415-4.437c.067.108.127.22.204.322a3.9 3.9 0 0 0 .292.306zM33.9 26a1.092 1.092 0 0 0 .43.872 1.12 1.12 0 0 0 1.42-.068A1.1 1.1 0 1 0 33.9 26zm-6 8a1.1 1.1 0 0 0 2.196.093 1.135 1.135 0 0 0-.426-.965A1.087 1.087 0 0 0 29 32.9a1.101 1.101 0 0 0-1.1 1.1zm-5.8 4a1.098 1.098 0 1 0-.06.362A1.101 1.101 0 0 0 22.1 38zm13 5a1.1 1.1 0 1 0-2.2 0 1.1 1.1 0 0 0 2.2 0zm10.8-8a1.9 1.9 0 1 1-3.8 0c0-.053.003-.105.007-.158A1.9 1.9 0 0 1 45.9 35zm-.8 0a1.1 1.1 0 0 0-2.196-.093 1.153 1.153 0 0 0 .216.752A1.1 1.1 0 0 0 45.1 35z"/></svg></span>
                          <span class="sublink-text">GeoAnalytics Server</span>
                        </a>
                      </li>
                      <li class="dropdown-subitem-featured">
                        <a href="../../../../../zh-CN/geoevent/" class="sublink-featured">
                          <span><svg class="sublink-image" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><path d="M13 8h-2V7h2zm4-1h-2v1h2zm0 8h-2v1h2zM9 7H7v1h2zm12.418 20.9H3.1v-7.566l.834-.834-.834-.834v-6.332l.834-.834-.834-.834V3.1h38.8v7.566l-.834.834.834.834v6.33l-.826.844.826.826v2.117c-.259-.177-.53-.337-.8-.497v-1.288l-.766-.766H4.666l-.766.766V27.1h17.933c-.148.26-.283.53-.415.8zM4.666 11.1h35.668l.766-.766V3.9H3.9v6.434zm0 8h35.688l.746-.763v-5.671l-.766-.766H4.666l-.766.766v5.668zM9 24v-1H7v1zm4-9h-2v1h2zm0 9v-1h-2v1zm-4-9H7v1h2zm8 9v-1h-2v1zm16.9 2h-.8v8.9H39v-.8h-5.1zm.1-3.901a11.9 11.9 0 1 0 11.9 11.9 11.914 11.914 0 0 0-11.9-11.9zm0 23a11.1 11.1 0 1 1 11.1-11.1 11.112 11.112 0 0 1-11.1 11.1z"/></svg></span>
                          <span class="sublink-text">GeoEvent Server</span>
                        </a>
                      </li>
                      <li class="dropdown-subitem-featured">
                        <a href="../../../../../zh-CN/notebook/" class="sublink-featured">
                          <span><svg class="sublink-image" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><path d="M22 27.1H3.9v-6.434l.766-.766h18.576a5.262 5.262 0 0 1 .83-.8H4.666l-.766-.766v-5.668l.766-.766h35.668l.766.766V18h.8v-5.666l-.834-.834.834-.834V3.1H3.1v7.566l.834.834-.834.834v6.332l.834.834-.834.834V27.9H22zM3.9 10.334V3.9h37.2v6.434l-.766.766H4.666zM9 8H7V7h2zm8 0h-2V7h2zm-4 0h-2V7h2zm2 16v-1h2v1zm-4 0v-1h2v1zm-4 0v-1h2v1zm0-8v-1h2v1zm8 0v-1h2v1zm-4 0v-1h2v1zm18.9 8.1h-1.8v1.8h1.8zm-.8 1h-.2v-.2h.2zm15.498-4.48a2.727 2.727 0 0 0-1.62-.5v-.02H27.25a3.154 3.154 0 0 0-3.15 3.15V38.1h-1.68a3.386 3.386 0 0 0-2.872 1.58 3.49 3.49 0 0 0-.157 3.419 3.241 3.241 0 0 0 2.954 1.801h15.161a3.404 3.404 0 0 0 3.394-3.4V26.9h5v-3.65a3.224 3.224 0 0 0-1.302-2.63zM22.345 44.1a2.44 2.44 0 0 1-2.23-1.341 2.706 2.706 0 0 1 .11-2.65A2.588 2.588 0 0 1 22.42 38.9h12.89a3.395 3.395 0 0 0 0 5.2zM40.1 23.192V41.5a2.6 2.6 0 1 1-2.6-2.6v-.8H24.9V23.25a2.352 2.352 0 0 1 2.35-2.35h13.795a3.183 3.183 0 0 0-.945 2.292zm5 2.908h-4.2v-2.908a2.274 2.274 0 0 1 1.44-2.18 1.944 1.944 0 0 1 1.791.259 2.423 2.423 0 0 1 .97 1.979zm-17.1 5h9v.8h-9zm0 3h7v.8h-7zm0-6h9v.8h-9zm4-3h5v.8h-5z"/></svg></span>
                          <span class="sublink-text">Notebook Server</span>
                        </a>
                      </li>
                    </ul>
                  </nav>
                </div>

              <a id="nav-data-store" data-langlabel="data-store" href="../../../../../zh-CN/data-store/" class="top-nav-link">Data Stores</a>
              <a id="nav-cloud" data-langlabel="cloud" href="../../../../../zh-CN/cloud/" class="top-nav-link">云</a>
              <a id="nav-apps" data-langlabel="apps" href="../../../../../zh-CN/apps/" class="top-nav-link">应用程序</a>
            </nav>


            
            
            

            <div class="margin-left-1 top-nav-list right hide-if-logged-in logged-out-navigation">
               
  <button class="search-top-nav link-dark-gray js-search-toggle" href="#" aria-label="Search">
    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" class="svg-icon js-search-icon">
      <path d="M31.607 27.838l-6.133-6.137a1.336 1.336 0 0 0-1.887 0l-.035.035-2.533-2.533-.014.014c3.652-4.556 3.422-11.195-.803-15.42-4.529-4.527-11.875-4.531-16.404 0-4.531 4.531-4.529 11.875 0 16.406 4.205 4.204 10.811 4.455 15.365.848l.004.003-.033.033 2.541 2.54a1.33 1.33 0 0 0 .025 1.848l6.135 6.133a1.33 1.33 0 0 0 1.887 0l1.885-1.883a1.332 1.332 0 0 0 0-1.887zM17.811 17.809a8.213 8.213 0 0 1-11.619 0 8.217 8.217 0 0 1 0-11.622 8.219 8.219 0 0 1 11.619.004 8.216 8.216 0 0 1 0 11.618z"/>
    </svg>
    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" class="svg-icon js-close-icon hide">
      <path d="M18.404 16l9.9 9.9-2.404 2.404-9.9-9.9-9.9 9.9L3.696 25.9l9.9-9.9-9.9-9.898L6.1 3.698l9.9 9.899 9.9-9.9 2.404 2.406-9.9 9.898z"/>
    </svg>
  </button>

              
              <a data-langlabel="sign-in" id="login-link" class="icon-ui-user top-nav-link link-blue login-link" href="#">登录</a>
              
            </div>

            
            <nav class="margin-left-1 top-nav-list right hide-if-logged-out logged-in-navigation">
              
  <button class="search-top-nav link-dark-gray js-search-toggle" href="#" aria-label="Search">
    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" class="svg-icon js-search-icon">
      <path d="M31.607 27.838l-6.133-6.137a1.336 1.336 0 0 0-1.887 0l-.035.035-2.533-2.533-.014.014c3.652-4.556 3.422-11.195-.803-15.42-4.529-4.527-11.875-4.531-16.404 0-4.531 4.531-4.529 11.875 0 16.406 4.205 4.204 10.811 4.455 15.365.848l.004.003-.033.033 2.541 2.54a1.33 1.33 0 0 0 .025 1.848l6.135 6.133a1.33 1.33 0 0 0 1.887 0l1.885-1.883a1.332 1.332 0 0 0 0-1.887zM17.811 17.809a8.213 8.213 0 0 1-11.619 0 8.217 8.217 0 0 1 0-11.622 8.219 8.219 0 0 1 11.619.004 8.216 8.216 0 0 1 0 11.618z"/>
    </svg>
    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" class="svg-icon js-close-icon hide">
      <path d="M18.404 16l9.9 9.9-2.404 2.404-9.9-9.9-9.9 9.9L3.696 25.9l9.9-9.9-9.9-9.898L6.1 3.698l9.9 9.899 9.9-9.9 2.404 2.406-9.9 9.898z"/>
    </svg>
  </button>

             
              <div class="dropdown js-dropdown right">

                <div class="tablet-show top-nav-link">
                  <img alt="User Avatar" class="user-nav-image js-drawer-toggle" data-drawer="user-nav" data-user-avatar>
                  <a href="#" data-drawer="user-nav" class="user-nav-name js-drawer-toggle" data-first-name></a>
                </div>

                <div class="tablet-hide top-nav-link js-dropdown-toggle">
                  <img alt="User Avatar" class="user-nav-image js-drawer-toggle" data-drawer="user-nav" data-user-avatar>
                  <a class="user-nav-name top-nav-dropdown dropdown-btn" data-first-name>&nbsp;</a>
                </div>

                <nav class="dropdown-menu dropdown-right">
                
                  <a class="dropdown-link agolProfile" id="agolProfile" href="#">我的个人资料</a>
                  <a class="dropdown-link js-log-out" id="agolLogout" href="#">登出</a>
                </nav>
              </div>
            </nav>
            

            
          </div>
        </div>
      </header>

      <div class="js-search search-overlay">
        <div class="search-content" role="dialog" aria-labelledby="search">
          <form method="GET" id="helpSearchForm">
            <label>
              搜索 ArcGIS Server 10.8 帮助
              <div class="search-bar">
                <input type="search" name="q"  placeholder="搜索 ArcGIS Server 10.8 帮助" class="search-input js-search-input">
                <input type="hidden" name="collection" value="help" />
                <input type="hidden" name="product" value="arcgis-server-windows" />
                <input type="hidden" name="version" value="10.8" />
                <input type="hidden" name="language" value="zh-CN" />
              </div>
            </label>
            <input type="hidden" name="relativePath" value="../../../../../" /><button type="submit" class="btn btn-large right">搜索</button>
          </form>
        </div>
      </div>

      <!--googleon: all-->

      <div id="skip-to-content">
        <!--googleoff: all-->
        <header class="sub-nav sub-nav-learn">
          <div class="grid-container">
            
            <div class="column-24">
              <div style="display:table;" class="sdk-home-banner">
                <div class="sdk-home-banner-content">
                  <h1 class="sub-nav-title link-white">ArcGIS Server</h1>
                </div>
              </div>
            </div>

            <div class="column-24">
              <nav class='sub-nav-list tablet-hide'><a class="sub-nav-link" href="../../../../../zh-CN/server/" target="_top" title="ArcGIS Server 的概述和文档">主页</a><a class="sub-nav-link" href="../../../../../zh-CN/server/latest/get-started/windows/" target="_top" title="了解有关 ArcGIS Server 和服务器角色的信息">简介</a><a class="sub-nav-link" href="../../../../../zh-CN/server/latest/deploy/windows/" target="_top" title="构建、配置和升级部署">部署</a><a class="sub-nav-link" href="../../../../../zh-CN/server/latest/manage-data/windows/" target="_top" title="管理企业的空间数据">管理数据</a><a class="sub-nav-link is-active" href="../../../../../zh-CN/server/latest/publish-services/windows/" target="_top" title="使用 GIS 服务">管理服务</a><a class="sub-nav-link" href="../../../../../zh-CN/server/latest/create-web-apps/windows/" target="_top" title="创建 Web 应用程序和可打印地图">共享</a><a class="sub-nav-link" href="../../../../../zh-CN/server/latest/administer/windows/" target="_top" title="管理和保护 ArcGIS Server">管理</a><a class="sub-nav-link" href="../../../../../zh-CN/server/latest/develop/windows/" target="_top" title="构建扩展模块并自动执行常见任务">开发</a></nav><select class='tablet-show select-full trailer-half js-select-nav'><option value="../../../../../zh-CN/server/">主页</option><option value="../../../../../zh-CN/server/latest/get-started/windows/">简介</option><option value="../../../../../zh-CN/server/latest/deploy/windows/">部署</option><option value="../../../../../zh-CN/server/latest/manage-data/windows/">管理数据</option><option selected="true" value="../../../../../zh-CN/server/latest/publish-services/windows/">管理服务</option><option value="../../../../../zh-CN/server/latest/create-web-apps/windows/">共享</option><option value="../../../../../zh-CN/server/latest/administer/windows/">管理</option><option value="../../../../../zh-CN/server/latest/develop/windows/">开发</option></select>
            </div>

          </div>
        </header>
        <!--googleon: all-->
       
        <!-- content goes here -->
        <div class="grid-container ">
          

            
              
  <!--BREADCRUMB-BEG--><div id="bigmac" class="sticky-breadcrumbs trailer-2" data-spy="affix" data-offset-top="180"> </div><!--BREADCRUMB-END-->
  <!--googleoff: all-->
    <div class="column-5 tablet-column-12 trailer-2 ">
      <aside class="js-accordion accordion reference-index" aria-live="polite" role="tablist">
        <div></div>
      </aside>

      <div class="js-sticky scroll-show tablet-hide leader-1 back-to-top" data-top="0" style="top: 0px;">
        <a href="#" class="btn btn-fill btn-clear">返回顶部</a>
      </div>
    </div>
  <!--googleon: all-->
  
            
            
            
	
		<div class="column-13  pre-1 content-section">
	
		<header class="trailer-1"><h1>在 Web 应用程序中使用地理处理任务</h1></header>

		 
	<!--googleoff: all-->
	
		
				<aside id="main-toc-small" class="js-accordion accordion tablet-show trailer-1">
			      <div class="accordion-section">
			        <h4 class="accordion-title">在本主题中</h4>
			        <div class="accordion-content list-plain">
			          <ol class="list-plain pre-0 trailer-0"><li><a href="#ESRI_SECTION1_CFB7E685C78B4B4FBE2DCC6181911562">Web 应用程序中的地理处理任务</a></li><li><a href="#ESRI_SECTION1_F452FF6E59414902A3169C2479413800">使用 <ph translate="no" varid="ArcGISAPIforJavaScript">ArcGIS API for JavaScript</ph> 中的地理处理任务</a></li></ol>
			        </div>
			      </div>
			     </aside>
		
    
   <!--googleon: all-->


		<main>
			
	
    	
    


			
<p id="GUID-1181223B-5D36-499D-BACC-9F1F77CC0A36">通过 <span class="ph">ArcGIS API for JavaScript</span>，Web 浏览器可以与 <span class="ph">ArcGIS Server</span> 服务进行通信、绘制地理数据并执行分析。</p><p id="GUID-B46E1A8C-C955-4220-A43D-EE1D7E0F1C78">  由于可通过 Web URL 访问库，因此无需下载此库。<a target="_blank" class="xref xref" href="https://developers.arcgis.com/javascript/"><span class="ph">ArcGIS API for JavaScript</span> 文档</a>可提供代码示例、教程、指南和详细的参考材料。</p><section class="section1 padded-anchor" id="ESRI_SECTION1_CFB7E685C78B4B4FBE2DCC6181911562" purpose="section1"><h2>Web 应用程序中的地理处理任务</h2><p id="GUID-B410815C-45A2-4E4D-A84F-69932261216E"> 使用地理处理服务，可将地理处理功能和数据分析添加至 Web 应用程序。每个地理处理服务包含一个或多个地理处理任务。</p><p id="GUID-840CAFED-3496-4B0B-A456-1D16D42C00DB">如果浏览 <span class="ph">ArcGIS Server</span> 的服务目录，可以找到地理处理服务、该服务中的任务以及每个任务的参数和属性。<a class="xref xref" href="../../../../../zh-CN/server/latest/publish-services/windows/introduction-to-geoprocessing-rest-services.htm">地理处理 REST 服务</a>主题提供有关 REST 资源等级的信息，而<a class="xref xref" href="../../../../../zh-CN/server/latest/publish-services/windows/introduction-to-geoprocessing-tasks.htm">地理处理任务介绍</a>主题提供有关地理处理任务、参数和访问方式的详细信息。<span class="ph">ArcGIS API for JavaScript</span> 提供了合适的对象和方法，以便访问地理处理任务和执行功能。</p><p id="GUID-C5965E1B-F289-4D37-97A0-387740FA22C1"> 要在 Web 应用程序中添加某个任务提供的地理处理功能，请遵循以下四个步骤：<ol class="list-numbered" purpose="ol" id="OL_76E0A8263DCB46BABAC29DBC82B01B95"><li purpose="li" id="LI_33E29C888E1342BF90AE5AA92C4A4CAC">  初始化地理处理任务。</li><li purpose="li" id="LI_67CF2954959A4689B699C8DD3CFB2D5A">设置任务参数。</li><li purpose="li" id="LI_7C90631D12E04DA7AEA56862EA8BC98F">运行任务。</li><li purpose="li" id="LI_E491F1CD0C6C468F9BA2E6EC966F4608">渲染结果。</li></ol></p><p id="GUID-A3CC31D7-9CD8-44D9-AE35-C1B3E5794847"> 通过这四个步骤，应用程序可以与服务器进行通信、成功执行任务并在应用程序中显示所需结果。</p></section><section class="section1 padded-anchor" id="ESRI_SECTION1_F452FF6E59414902A3169C2479413800" purpose="section1"><h2>使用 <span class="ph">ArcGIS API for JavaScript</span> 中的地理处理任务</h2><p id="GUID-619A62E3-8314-485A-A0E2-C919E9DC76A6">通过这四个步骤，您可以使用 <span class="ph">ArcGIS API for JavaScript</span> 成功添加地理处理功能。</p><section class="section2 padded-anchor" id="ESRI_SECTION2_2AF05247727A469F89DBFC096A231B8A" purpose="section2"><h3>步骤 1：初始化地理处理任务</h3><p id="GUID-1B9AB961-33C2-4C0B-9AF9-552365246A36">要初始化地理处理任务，需要了解任务 URL。地理处理任务 URL 的模板为 <span class="usertext">https://&lt;arcgis-host&gt;/&lt;gpservicename&gt;/GPServer/&lt;gptask-name&gt;</span>。将以下代码添加到 JavaScript 应用程序中，用于初始化地理处理任务。</p><p id="GUID-ED520346-61ED-4B04-8419-234066C79605"> 执行初始化时，确保将地理处理任务实例的 <span class="usertext">OutSpatialReference</span> 属性设置为 Web 地图空间参考。地理处理任务数据集可能位于不同的空间参考中，因此其输出所位于的空间参考也有所不同。然而，Web 应用程序假设任务输出与地图的空间参考相同。这可能导致绘制输出时发生异常行为。因此，必须设置地理处理任务的输出空间参考属性。服务器将在由 <span class="usertext">OutSpatialReference</span> 属性指定的空间参考中返回输出。</p><section class="codeblock padded-anchor" purpose="codeblock"><div class="codeblockdesc" purpose="codeblockdesc"><p id="GUID-CB26AE3C-4518-4026-B9F8-4458E2C08037">初始化地理处理任务 </p></div><div class="codeblockbody"><pre><code class="javascript">// esri.tasks.gp is required for using Geoprocessor.
//  Add it along with other dojo.require statements.
dojo.require(esri.tasks.gp); 
/* Step 1: Initialize Geoprocessing Task as a global variable. 
    That is, declare the variable outside a function definition 
    since we will be using gpTask variable in other methods */
var gpTaskUrl=&quot;https://myserver/ArcGIS/rest/services/&quot; +
                   &quot;BufferPoints/GPServer/BufferPoints&quot;;
var gpTask = new esri.tasks.Geoprocessor(gpTaskUrl);	
// Set output spatial reference property to map's spatial reference.
//   myMap is assumed to be an instance of map container esri.map.
gpTask.outSpatialReference=myMap.spatialReference;</code></pre></div></section></section><section class="section2 padded-anchor" id="ESRI_SECTION2_F8B63A5AA79943BE8AEF759D389F9D86" purpose="section2"><h3>步骤 2：设置任务参数</h3><p id="GUID-542DD3DA-BFFF-447E-8AA1-2CC881F38B90"> 执行地理处理任务时，Web 应用程序必须提供地理处理任务的参数值。要了解任务的参数要求，请复制任务 URL，并将其粘贴到 Web 浏览器地址栏，打开服务目录的“任务”页面。“任务”页面列出了所有任务参数及其数据类型。此外，任务页面还包含帮助 URL，在此可以查找有关地理处理功能、访问和使用的详细信息。</p><p id="GUID-362B8170-8CB9-47C8-8DDB-AA815FF8F84E"><a class="xref xref" href="../../../../../zh-CN/server/latest/publish-services/windows/task-parameter-properties.htm">了解有关任务参数属性的详细信息</a></p><p id="GUID-AD558F96-29C0-415B-A1F2-AD3FCF3F3F4B"> 为了成功执行任务，必须为该任务所需的所有输入参数 (<span class="usertext">EsriGPParameterTypeRequired</span>) 指定值，如“任务”页面所示。通常，任务值来自于以下一个或多个来源：<ul purpose="ul" id="UL_E230B3DB3BF2421F9A61D5E464FA2CF4"><li purpose="li" id="LI_51B3ADD0040948DFBF8C48CD860C29DD">用户使用 Web 应用程序输入的值</li><li purpose="li" id="LI_6D7586485AEE47A495E83FB15C761042">当前其中一个 Web 地图要素图层或图形图层的值</li><li purpose="li" id="LI_16247539FECA43E1A09F380A13F112D9">其他任务的结果，如查询、路径任务等</li><li purpose="li" id="LI_4F1F02C8C1AC457E9E2A0997965904C0">其他地理处理任务的结果</li></ul></p><p id="GUID-95DDD77D-7078-4763-A941-2318C5905F8E"> 以下 JavaScript 代码显示了从添加到 Web 地图的 <a target="_blank" class="xref xref" href="https://developers.arcgis.com/en/javascript/jsapi/featurelayer-amd.html">FeatureLayer</a> 创建输入要素 <span class="usertext">GPFeatureRecordsetLayer</span> 参数，以及使用 <span class="usertext">id="distance"</span> 派生于 <span class="usertext">Dojo</span> 文本输入的 <span class="usertext">GPLinearUnit</span> 参数 <span class="usertext">BuffDistance</span> 的示例。此示例假设用户将交互输入距离值。创建任务参数后，构建具有参数名称-值对的 JSON 结构，然后发送至服务器。</p><section class="codeblock padded-anchor" purpose="codeblock"><div class="codeblockdesc" purpose="codeblockdesc"><p id="GUID-21B8C3A3-4C5B-4E83-91CD-77CC85CC5418">设置参数</p></div><div class="codeblockbody"><pre><code class="javascript">//Step 2: Setup Parameters of the task
function setupParameters(){
   /* The code below assumes that the web map 
     has a featurelayer with id fLayer. */
   // Get Input Parameter 1 : GPFeatureRecordSetLayer from fLayer.
   var inputFeatures = new esri.tasks.FeatureSet();			    
   inputFeatures.features = map.getLayer(&quot;fLayer&quot;).graphics;
   inputFeatures.fields=map.getLayer(&quot;fLayer&quot;).fields;
   // Get Input Parameter 2 : GPLinearunit from a dojo UI element
   var buffDistance = new esri.tasks.LinearUnit();
   buffDistance.distance=dojo.byId(“distance”).value;
   buffDistance.units=”esriMiles”;
   // Create Parameter list with name-value pairs.
   // Names must match the parameter name in Task page.
   // Parameters must be in the same-order as in Task page.
   var params= {&quot;Input_Features&quot;:inputFeatures, 
              &quot;Distance&quot;:buffDistance};
   // Return name-value pairs of parameters
   return params;
}</code></pre></div></section><div class="panel trailer-1 note" id="GUID-EB6C6F93-0CC6-437B-89EB-47A5F0B5B7CB"><h5 class="icon-ui-comment trailer-0">注：</h5><p id="GUID-5A0658B0-BB7E-46E6-B31D-0D4D8418F328"> <span class="usertext">GPFeatureRecordSetLayer</span> 和 <span class="usertext">GPRecordSetLayer</span> 参数具有由任务定义的默认方案。您可以在“任务”页面查找参数方案。<span class="usertext">GPFeatureRecordSetLayer</span> 方案包含几何、空间参考、字段和要素。最好确保 <span class="usertext">GPFeatureRecordSetLayer</span> 参数具有在方案中定义的所有属性，以获得成功结果。</p></div></section><section class="section2 padded-anchor" id="ESRI_SECTION2_CF3CF203385F42BD85FB3CE040781626" purpose="section2"><h3>步骤 3：运行任务</h3><p id="GUID-E68FF27D-EF4E-4EF9-B974-09FFFFA7868C"> 要运行任务，应使用基于地理处理任务支持操作的地理处理器实例 (<span class="usertext">gpTask</span>) 的 <span class="usertext">execute</span> 或 <span class="usertext">submitJob</span> 方法。您可以在“任务”页面查找任务所支持的操作。<a class="xref xref" href="../../../../../zh-CN/server/latest/publish-services/windows/task-operation-execute.htm">任务操作：execute</a> 和<a class="xref xref" href="../../../../../zh-CN/server/latest/publish-services/windows/task-operation-submitjob.htm">任务操作：submitJob</a> 主题介绍了各种操作之间的区别以及操作时服务器与客户端之间的通信。</p><section class="section3 padded-anchor" id="ESRI_SECTION3_EE7E85780B9049428EEFCA317292E591" purpose="section3"><h4>任务操作：execute</h4><p id="GUID-94E101FA-0028-4304-9AD4-8D484EEF5C91"> 如果任务所支持的操作为执行任务，则必须使用地理处理器实例的 <span class="usertext">execute</span> 方法并传递参数。必须定义事件处理程序，用以根据成功和失败的请求操纵应用程序。当任务成功执行时，触发 <span class="usertext">onExecuteComplete</span> 事件，并返回结果和地理处理消息。任务执行失败时，触发 <span class="usertext">onError</span> 事件。任务失败时，服务器将返回错误实例，包含 HTML 错误代码和地理处理消息（如果有）。</p><section class="codeblock padded-anchor" purpose="codeblock"><div class="codeblockdesc" purpose="codeblockdesc"><p id="GUID-A90DBBF1-D160-4591-9D65-3859360A7776">任务操作：execute</p></div><div class="codeblockbody"><pre><code class="javascript">function myGPExecuteTask(){
 // Get params from setupParameters method described above. var params=setupParameters();
 // Setup onTaskSuccess and onTaskFailure event handlers. dojo.connect(gpTask, &quot;onExecuteComplete&quot;,onTaskSuccess);
 dojo.connect(gpTask, &quot;onError&quot;,onTaskFailure);
 // Execute gpTask with params gpTask.execute(params);
}
// Callback when the Task operation succeeded function onTaskSuccess(results, messages) {
  // Do something with the results...  // More info on rendering the results in section below    
}
// Handler that is invoked when the Task operation has failed function onTaskFailure(error) {
  // Report error   alert(&quot;Error:&quot;+ error); 
}</code></pre></div></section></section><section class="section3 padded-anchor" id="ESRI_SECTION3_602F670126EC4C2DAA14EF94B6B7E519" purpose="section3"><h4>任务操作：submitJob</h4><p id="GUID-3A37BC20-DC72-4436-A5BE-F97164B75721"> 如果任务所支持的操作是 <span class="usertext">submitJob</span> 操作，则必须使用 <span class="usertext">Geoprocessor.submitJob</span> 方法，并传递参数。如果是 <span class="usertext">submitJob</span>，则触发三个事件，这三个事件必须在 Web 应用程序中进行相应处理。</p><p id="GUID-427C0DE9-8F25-49C9-B96D-3CD767A3A4F1"><h4 class="table title"></h4><div class="overflow-auto"><table class="tablexyz lined-rows lined-columns bordered  
            always-wrap
          "><colgroup width="*"></colgroup><colgroup width="*"></colgroup><tbody class="align-middle"><tr class="align-middle"><td outputclass="" purpose="entry" rowspan="1" colspan="1"><p id="GUID-5467D85F-D930-4992-948B-99D43D820440"><span class="usertext">onStatusUpdate</span></p></td><td outputclass="" purpose="entry" rowspan="1" colspan="1"><p id="GUID-4EDB0554-4128-4714-AF47-7DF714434D47">接收作业的当前状态时</p></td></tr><tr class="align-middle"><td outputclass="" purpose="entry" rowspan="1" colspan="1"><p id="GUID-CC82FFB8-3B57-418F-8C4E-230D0F2F9B15"><span class="usertext">onJobComplete</span></p></td><td outputclass="" purpose="entry" rowspan="1" colspan="1"><p id="GUID-944C9A9A-03C2-42AF-9C7D-20C9D6043B6E">作业成功完成时</p></td></tr><tr class="align-middle"><td outputclass="" purpose="entry" rowspan="1" colspan="1"><p id="GUID-401D1506-BC18-46E3-A0DB-3E5E52BC4513"><span class="usertext">onError</span></p></td><td outputclass="" purpose="entry" rowspan="1" colspan="1"><p id="GUID-0D0DC007-27E8-4D79-A833-9CBAFC3E33EF">作业失败时</p></td></tr></tbody><caption></caption></table></div></p><p id="GUID-C20DF88E-F594-4085-82D4-92FB689A82AF"> <ul purpose="ul" id="UL_9E93B9A1C3D74903A93807DA0B8C2BA4"><li purpose="li" id="LI_657AF5E981C4464D84D94A01D3092863"><b>onStatusUpdate：</b>与 <span class="usertext">execute</span> 不同，如果是 <span class="usertext">submitJob</span>，服务器将创建作业，并分配<span class="usertext">作业 Id</span>。<span class="usertext">submitJob</span> 操作不会在作业完成时通知客户端，因此，客户端将自行检查服务以确定作业状态。默认情况下，Web 应用程序每秒向服务器发送一次状态请求，以确定任务状态。每次收到状态响应时，都会触发 <span class="usertext">onStatusUpdate</span> 事件。如果需要，可以通过 <span class="usertext">Geoprocessor.setUpdateDelay</span> 方法增加或减少状态检查的时间间隔。每次检查作业状态时，都会触发 <span class="usertext">onStatusUpdate</span> 事件。事件处理程序接收到由服务器返回的 <a target="_blank" class="xref xref" href="https://developers.arcgis.com/javascript/jsapi/jobinfo-amd.html">JobInfo</a> 实例，其中包含作业 ID、作业状态和任何 <a target="_blank" class="xref xref" href="https://developers.arcgis.com/javascript/jsapi/gpmessage-amd.html">GPMessages</a>。您可以使用此信息保持跟踪任务进程。</li><li purpose="li" id="LI_58F54714A5CF4637A2B8BF9227504F30"><b>onJobComplete：</b> 当 <span class="usertext">JobInfo.jobStatus = STATUS_SUCCEEDED</span> 时，将触发 <span class="usertext">onJobComplete</span> 事件。操作完成时，结果不会自动返回至客户端，而是存储在服务器上，客户端必须必须发送请求才能检索结果。在 <span class="usertext">onJobComplete</span> 事件处理程序中，可以调用 <span class="usertext">Geoprocessor.getResultData</span> 方法以获取结果。每个输出参数都是独立的资源，因此必须为任务的每个输出参数调用地理处理器实例的 <span class="usertext">GetResultData</span> 方法。必须提供由事件处理程序返回的<span class="usertext">作业 Id</span> 以及 <span class="usertext">GetResultData</span> 方法中的输出参数名称。此外，还必须为 <span class="usertext">onGetResultDataComplete</span> 事件创建事件处理程序。当 Web 应用程序接收输出参数的结果值时，将触发 <span class="usertext">onGetResultDataComplete</span> 事件。</li><li purpose="li" id="LI_B3D7778CC1E542BA9CA4F1E174E34E2E"><b>onError：</b>如果 <span class="usertext">submitJob</span> 请求或状态请求超时或地理处理任务失败，则触发 <span class="usertext">onError</span> 事件。该事件将返回包含 HTML 错误代码的错误实例。</li></ul>您可在<a class="xref xref" href="../../../../../zh-CN/server/latest/publish-services/windows/task-operation-submitjob.htm">任务操作：submitJob</a> 中的 <span class="usertext">submitJob</span> 操作中了解到有关作业、作业 ID、jobstatus 以及服务器与客户端间通信的更多信息。以下代码显示了如何将作业提交至服务器以及如何处理事件。</p><section class="codeblock padded-anchor" purpose="codeblock"><div class="codeblockdesc" purpose="codeblockdesc"><p id="GUID-1E142F94-D010-46D9-933C-304F6F88D7E3">任务操作：submitJob</p></div><div class="codeblockbody"><pre><code class="javascript">function myGPSubmitJob(){
 // Get params from setupParameters method described above.
 var params=setupParameters();
 // Setup event handlers.
 dojo.connect(gpTask, &quot;onJobComplete&quot;,onTaskComplete);
 dojo.connect(gpTask, &quot;onError&quot;,onTaskFailure);
 dojo.connect(gpTask, &quot;onStatusUpdate&quot;,onTaskStatus);
 gpTask.submitJob(params);
}
// Event handler for onJobComplete event
function onTaskComplete(jobInfo) {
    /* Get the value of an output parameter Buffer_polygons
      using getResultData. The name of the output
      may vary in your gpTask*/      
    dojo.connect(gpTask, &quot;onGetResultDataComplete&quot;,
                      onTaskResultComplete);
    gpTask.getResultData(jobInfo.jobId, 
                          &quot;Buffer_polygons&quot;);
}
// Event handler for onStatusUpdate event
function onTaskStatus(jobInfo) {
     //write status to console to help debugging
    console.log(jobInfo.jobStatus);
}
// Event handler for onError event
function onTaskFailure(error) {
  // Report error 
  alert(&quot;Error:&quot;+ error); 
}</code></pre></div></section></section></section><section class="section2 padded-anchor" id="ESRI_SECTION2_ADC4C6BEAAD6454E941B92D7B8DEB770" purpose="section2"><h3>步骤 4：渲染结果</h3><p id="GUID-EFE3F1AA-2062-4C3B-A825-368589DB5E1B"> 根据输出参数的数据类型渲染地理处理任务的结果。</p><p id="GUID-369F17F9-56A2-4911-A9EE-0AD5EE640D27"><h4 class="table title"></h4><div class="overflow-auto"><table class="tablexyz lined-rows lined-columns bordered  
            always-wrap
          "><colgroup width="*"></colgroup><colgroup width="*"></colgroup><tbody class="align-middle"><tr class="align-middle"><td outputclass="" purpose="entry" rowspan="1" colspan="1"><p id="GUID-22E0D32F-9D5E-43ED-A295-334E863CAA6D"><span class="usertext">GPFeatureRecordSetLayer</span></p></td><td outputclass="" purpose="entry" rowspan="1" colspan="1"><p id="GUID-7A3B7AD6-386A-442E-8F95-4ED908D91B93"> 输出要素在 Web 地图中通常绘制为图形图层，用于显示地理处理结果。</p></td></tr><tr class="align-middle"><td outputclass="" purpose="entry" rowspan="1" colspan="1"><p id="GUID-981414B7-B14F-4391-A123-93DBC1DBD9B0"><span class="usertext">GPRecordSet</span></p></td><td outputclass="" purpose="entry" rowspan="1" colspan="1"><p id="GUID-BA6592F1-C956-4096-AFAD-254C0283B297">在格网中显示输出记录，或者将这些值用于创建图表和图形。</p></td></tr><tr class="align-middle"><td outputclass="" purpose="entry" rowspan="1" colspan="1"><p id="GUID-9ECC821F-DED0-4D3A-AAF1-7B77C6F633D2"> <span class="usertext">GPRasterDataLayer</span></p></td><td outputclass="" purpose="entry" rowspan="1" colspan="1"><p id="GUID-F5E2EB88-94E6-4FAE-A4B5-8CCA3D64E873"> 输出栅格可以下载，但无法在地图中绘制。然而，可以使用结果地图服务显示栅格数据。</p><p id="GUID-1DE7181D-2174-4951-AEC3-C5BF7F2CC98D">了解有关<a class="xref xref" href="../../../../../zh-CN/server/latest/publish-services/windows/result-map-service.htm">结果地图服务</a>和<a class="xref xref" href="../../../../../zh-CN/server/latest/publish-services/windows/using-result-map-service-in-web-applications.htm">在 Web 应用程序中使用结果地图服务</a>的详细信息</p></td></tr><tr class="align-middle"><td outputclass="" purpose="entry" rowspan="1" colspan="1"><p id="GUID-A620C6DF-D629-4ADD-838A-42E22EB38978"> <span class="usertext">GPDataFile</span></p></td><td outputclass="" purpose="entry" rowspan="1" colspan="1"> <p id="GUID-77C04EF4-80FE-4D93-8ED6-AA01FAE5363E"> 输出文件可以下载，或者诸如 <span class="usertext">.gpx</span> 和 <span class="usertext">.csv</span> 之类的文件可通过 Web 应用程序进行处理。</p></td></tr><tr class="align-middle"><td outputclass="" purpose="entry" rowspan="1" colspan="1"><p id="GUID-5AF33E3F-1B9B-4665-80EB-05CA38ED95BB"> <span class="usertext">GPBoolean</span>、<span class="usertext">GPDataFile</span>、<span class="usertext">GPLong</span>、<span class="usertext">GPDouble</span>、<span class="usertext">GPString</span>、<span class="usertext">GPLinearUnit</span>、<span class="usertext">GPDate</span></p></td><td outputclass="" purpose="entry" rowspan="1" colspan="1"><p id="GUID-7010AAE4-DB5B-4550-8F3F-E510C01679B4"> 使用 HTML 或其他微件显示输出。</p></td></tr></tbody><caption></caption></table></div></p><section class="section3 padded-anchor" id="ESRI_SECTION3_BAB8440DF28146F498C65DEC49BDC649" purpose="section3"><h4>从 <span class="usertext">onExecuteComplete</span> 事件处理程序中获得的结果</h4><p id="GUID-A2E160BB-049A-49A3-9F43-BEDDC21FC893"> 如果是 <span class="usertext">execute</span> 操作，<span class="usertext">onExecuteComplete</span> 事件将返回地理处理任务的结果和消息。结果实例是任务的所有输出参数的数组，数组中的条目始终按照“任务”页面列出的顺序排列。因此，可以通过数组中参数值的位置来识别各个参数值。数组中的每个输出参数都具有参数名称、数据类型和值。下列代码显示了如何访问结果中的第一个输出参数。在以下代码中，输出参数称为 <span class="usertext">GPFeatureRecordSetLayer</span> 输出，因此该代码可说明如何将参数渲染为图形图层并将其添加到 Web 应用程序中。</p><section class="codeblock padded-anchor" purpose="codeblock"><div class="codeblockdesc" purpose="codeblockdesc"><p id="GUID-02B14355-FB7A-48CF-B0D6-C144A5EE760C">渲染 onExecuteComplete 事件处理程序中的结果</p></div><div class="codeblockbody"><pre><code class="javascript">function onTaskSuccess(results, messages) {
    /* Retrieve the output parameter value based 
      on its position from the result instance.
      In the case shown below, the output is the first output 
      parameter of the task and it
      is a GPFeatureRecordSetLayer.*/
    var featureset = results[0].value;
   
    // Create a graphics layer with features
    var taskResultLayer= new esri.layers.GraphicsLayer
              ({id:&quot;MyGPExecuteResultLayer&quot;});
    
    // Create a symbol based on the geometry. 
    // The geometry is assumed to be polygons in the code below
    var simplePolySymbol = new esri.symbol.SimpleFillSymbol();
    simplePolySymbol.setOutline(new esri.symbol.SimpleLineSymbol(
                  esri.symbol.SimpleLineSymbol.STYLE_SOLID,
                  new dojo.Color([0,0,0,0.5]), 1));
    simplePolySymbol.setColor(new dojo.Color([255,0,0,0.7]));
    
    // Create graphics from features and add it graphicslayer 
    dojo.forEach(featureset.features,function(feature){
             feature.setSymbol(simplePolySymbol);
             //Add feature to the graphics layer
             taskResultLayer.add(feature);});
    }
    // Add graphicslayer to webmap 
    //  myMap is assumed to be an instance of map container esri.map
    myMap.addLayer(taskResultLayer)
}</code></pre></div></section></section><section class="section3 padded-anchor" id="ESRI_SECTION3_DB977002834446CEA15F358551889998" purpose="section3"><h4>从 <span class="usertext">onGetResultDataComplete</span> 事件处理程序中获得的结果</h4><p id="GUID-B1D41033-6C90-4A2D-B288-F4D74EA735FE"><span class="usertext">onGetResultDataComplete</span> 事件提供了结果实例。与 <span class="usertext">onExecuteComplete</span> 事件中的结果不同，该结果实例仅具有请求参数值。参数结果将包含请求参数的名称、数据类型和值。从结果中检索参数值，并根据需要使用。以下代码显示了如何渲染参数结果实例中 <span class="usertext">GPFeatureRecordSetLayer</span> 参数的结果。</p><section class="codeblock padded-anchor" purpose="codeblock"><div class="codeblockdesc" purpose="codeblockdesc"><p id="GUID-EE7516D1-7D4F-4EFD-8964-744AA393CEEC">从 OnGetResultDataComplete 事件处理程序中获得的结果</p></div><div class="codeblockbody"><pre><code class="javascript">function onTaskResultComplete(paramResult) {
   // Retrieve the value of the parameter from the paramresult   var featureSet = paramResult.value;
   // Create a graphics layer with features   var taskResultLayer= new esri.layers.GraphicsLayer              ({id:&quot;MyGPSubmitJobResultLayer&quot;});
       // Create a symbol based on the geometry. 
   // The geometry is assumed to be polygons in the code below   var simplePolySymbol = new esri.symbol.SimpleFillSymbol();
   simplePolySymbol.setOutline(new esri.symbol.SimpleLineSymbol(                  esri.symbol.SimpleLineSymbol.STYLE_SOLID,                  new dojo.Color([0,0,0,0.5]), 1));
   simplePolySymbol.setColor(new dojo.Color([255,0,0,0.7]));
       // Create graphics from features and add it graphicslayer 
   dojo.forEach(featureset.features,function(feature){
             feature.setSymbol(simplePolySymbol);
             //Add feature to the graphics layer             taskResultLayer.add(feature);});
   }
   // Add graphicslayer to webmap    //   myMap is assumed to be an instance of map container esri.map.
   myMap.addLayer(taskResultLayer) }</code></pre></div></section></section></section></section>
			
				<hr>
				<!--googleoff: all-->
				
	
        
		    <p class="feedback right">
		        <a id="afb" class="icon-ui-contact" href="/feedback/" data-langlabel="feedback-on-this-topic" >有关此主题的反馈?</a>
		    </p>
        
	

				<!--googleon: all-->
			
		</main>
	</div>
	
	<!--googleoff: all-->
	
		
			<div id="main-toc-large" class="column-5">
			    <div class="panel font-size--2 tablet-hide trailer-1">
			      <h5 class="trailer-half">在本主题中</h5>
			      <ol class="list-plain pre-0 trailer-0"><li><a href="#ESRI_SECTION1_CFB7E685C78B4B4FBE2DCC6181911562">Web 应用程序中的地理处理任务</a></li><li><a href="#ESRI_SECTION1_F452FF6E59414902A3169C2479413800">使用 <ph translate="no" varid="ArcGISAPIforJavaScript">ArcGIS API for JavaScript</ph> 中的地理处理任务</a></li></ol>
			    </div>
			    
			    
	  		</div>
		
    
   <!--googleon: all-->




          
        </div>
        <!-- ENDPAGECONTENT -->

      </div>

    </div>  <!-- End of wrapper -->

  <footer class="footer leader-3 link-dark-gray" role="contentinfo">
    <div class="grid-container">
      <div class="row">
        <nav class="column-6">
          <h6 data-langlabel="arcgis-for-server">Arc<span>GIS Enterprise</span></h6>
          <ul class="list-plain">
            <li><a data-langlabel="home" href="../../../../../zh-CN/">主页</a></li>
            <li><a data-langlabel="portal" href="../../../../../zh-CN/portal/">Portal</a></li>
            <li><a data-langlabel="server" href="../../../../../zh-CN/server/">Server</a></li>
            <li><a data-langlabel="data-store" href="../../../../../zh-CN/data-store/">Data Stores</a></li>
            <li><a data-langlabel="cloud" href="../../../../../zh-CN/cloud/">云</a></li>
            <li><a data-langlabel="apps" href="../../../../../zh-CN/apps/">应用程序</a></li>
            <li><a data-langlabel="documentation" href="../../../../../zh-CN/documentation/">文档</a></li>
          </ul>
        </nav>

        
  <nav class="column-6">
    <h6 data-langlabel="arcgis-platform">ArcGIS 平台</h6>
    <ul class="list-plain">
      <li><a data-langlabel="arcgis" href="//www.arcgis.com/">ArcGIS Online</a></li>
      <li><a data-langlabel="arcgis-for-professionals" href="//pro.arcgis.com/">ArcGIS Pro</a></li>
      <li><a data-langlabel="arcgis-for-server" href="//enterprise.arcgis.com/">ArcGIS Enterprise</a></li>
      <li><a data-langlabel="arcgis-for-developers" href="https://developers.arcgis.com/">ArcGIS for Developers</a></li>
      <li><a data-langlabel="arcgis-solutions" href="//solutions.arcgis.com/">ArcGIS Solutions</a></li>
      <li><a data-langlabel="arcgis-marketplace" href="//marketplace.arcgis.com/">ArcGIS Marketplace</a></li>
    </ul>
  </nav>

  <nav class="column-6">
    <h6 data-langlabel="about-esri">关于 Esri</h6>
    <ul class="list-plain">
      <li><a data-langlabel="about-us" href="//www.esri.com/about-esri/">关于我们</a></li>
      <li><a data-langlabel="careers" href="//www.esri.com/careers/">招贤纳士</a></li>
      <li><a data-langlabel="insiders-blog" href="https://www.esri.com/about/newsroom/blog/">Esri 博客</a></li>
      <li><a data-langlabel="user-conference" href="//www.esri.com/events/user-conference/index.html">用户大会</a></li>
      <li><a data-langlabel="developer-summit" href="//www.esri.com/events/devsummit/index.html">开发者峰会</a></li>
    </ul>
  </nav>

  <nav class="column-6">
    <a class="esri-logo" href="//www.esri.com/" aria-label="Esri Home"></a>
    <section class="footer-social-nav leader-1">
            <a class="icon-social-twitter" aria-label="Esri on Twitter" href="https://twitter.com/Esri/"></a>
            <a class="icon-social-facebook" aria-label="Esri on Facebook" href="https://www.facebook.com/esrigis/"></a>
            <a class="icon-social-github" aria-label="Esri on GitHub" href="//esri.github.io/"></a>
            <a class="icon-social-contact" aria-label="Contact Esri" href="//www.esri.com/about-esri/contact/"></a>
    </section>
	  
  </nav>
  
  <div class="column-24 leader-1">
    <p class="font-size--3"><a href="http://www.esri.com/legal/copyright-trademarks">Copyright &copy; 2019 Esri.</a> All rights reserved. | <a href="http://www.esri.com/legal/privacy/">隐私政策</a> | <a href="http://www.esri.com/legal/software-license">法律声明</a></p>
  </div>
  


      </div>
    </div>
  </footer>
  <!--googleoff: all-->

  
  
	<script src="../../../../../zh-CN/assets/js/init.js" type="text/javascript"></script>
	<!--<script src="../../../../../zh-CN/assets/js/drop-down.js" type="text/javascript"></script>-->
	<script src="../../../../../zh-CN/assets/js/search/searchform.js" type="text/javascript"></script>
	<script src="../../../../../zh-CN/cdn/js/link-modifier.js" type="text/javascript"></script>
	<script src="../../../../../zh-CN/cdn/js/sitewide.js" type="text/javascript"></script>
	<script src="../../../../../zh-CN/cdn/js/libs/highlight.pack.js" type="text/javascript"></script>
	<script>hljs.initHighlightingOnLoad();</script>


  
    

  <script src="../../../../../zh-CN/cdn/js/affix.js" type="text/javascript"></script>
  <script type="text/javascript">
    $(function () {
          var appendFlg = true;

          $("#bigmac")
          .on("affixed.bs.affix", function (evt) {
            if (appendFlg) {
              $("<a class='crumb' href='#'>在 Web 应用程序中使用地理处理任务</a>").insertAfter ($("#bigmac nav a").last());
              appendFlg = false;
            }
          })
          .on ("affix-top.bs.affix", function(evt) {
            if (!appendFlg) {
              $("#bigmac nav a").last().remove();
            }
            appendFlg = true;
          })
    })
  </script>
  
        <script type="text/javascript">
          window.doctoc = {
            pubID: "1634",
            tpcID: "500",
            
              prefix: "管理服务",
              prefixUrl: "/zh-cn/server/latest/publish-services/windows/",
          
            hideToc: false
          }
        </script>

        <script type="text/javascript" src="../../../../../zh-CN/server/latest/publish-services/windows/1634.js" ></script>
        <script type="text/javascript" src="../../../../../zh-CN/cdn/calcite/js/protoc.js" ></script>
        
        

  <noscript>
        <p>
            <a href="flisting.htm">flist</a>
        </p>
    </noscript>
    <script type="text/javascript"></script>
  
  
    
    

  </body>
</html>